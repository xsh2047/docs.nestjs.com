"use strict";(self.webpackChunkdocs_nestjs_com=self.webpackChunkdocs_nestjs_com||[]).push([[126],{8126:(P,p,r)=>{r.r(p),r.d(p,{OpenApiModule:()=>b});var c=r(6814),u=r(8833),d=r(6208),s=r(2437),e=r(4946),i=r(6663);let l=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-cli-plugin"]],features:[e.qOj],decls:440,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/cli-plugin.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","cli-plugin"],["rel","nofollow","target","_blank","href","https://www.typescriptlang.org/docs/handbook/decorators.html"],[1,"info"],["appAnchor","","id","overview"],[1,"language-typescript"],["href","/openapi/cli-plugin#using-the-cli-plugin"],["rel","nofollow","target","_blank","href","https://docs.nestjs.com/openapi/mapped-types"],["appAnchor","","id","comments-introspection"],[1,"language-ts"],["appAnchor","","id","using-the-cli-plugin"],["routerLink","/cli/overview"],[1,"language-javascript"],["appAnchor","","id","swc-builder"],["href","/recipes/swc#type-checking"],[1,"language-bash"],["href","/recipes/swc#monorepo-and-cli-plugins"],["appAnchor","","id","integration-with-ts-jest-e2e-tests"],[1,"language-json"],["appAnchor","","id","troubleshooting-jest-e2e-tests"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"CLI Plugin"),e.qZA(),e.TgZ(7,"p")(8,"a",6),e._uU(9,"TypeScript"),e.qZA(),e._uU(10,"'s metadata reflection system has several limitations which make it impossible to, for instance, determine what properties a class consists of or recognize whether a given property is optional or required. However, some of these constraints can be addressed at compilation time. Nest provides a plugin that enhances the TypeScript compilation process to reduce the amount of boilerplate code required."),e.qZA(),e.TgZ(11,"blockquote",7)(12,"strong"),e._uU(13,"Hint"),e.qZA(),e._uU(14," This plugin is "),e.TgZ(15,"strong"),e._uU(16,"opt-in"),e.qZA(),e._uU(17,". If you prefer, you can declare all decorators manually, or only specific decorators where you need them.\n"),e.qZA(),e.TgZ(18,"h4",8)(19,"span"),e._uU(20,"Overview"),e.qZA()(),e.TgZ(21,"p"),e._uU(22,"The Swagger plugin will automatically:"),e.qZA(),e.TgZ(23,"ul")(24,"li"),e._uU(25,"annotate all DTO properties with "),e.TgZ(26,"code"),e._uU(27,"@ApiProperty"),e.qZA(),e._uU(28," unless "),e.TgZ(29,"code"),e._uU(30,"@ApiHideProperty"),e.qZA(),e._uU(31," is used"),e.qZA(),e.TgZ(32,"li"),e._uU(33,"set the "),e.TgZ(34,"code"),e._uU(35,"required"),e.qZA(),e._uU(36," property depending on the question mark (e.g. "),e.TgZ(37,"code"),e._uU(38,"name?: string"),e.qZA(),e._uU(39," will set "),e.TgZ(40,"code"),e._uU(41,"required: false"),e.qZA(),e._uU(42,")"),e.qZA(),e.TgZ(43,"li"),e._uU(44,"set the "),e.TgZ(45,"code"),e._uU(46,"type"),e.qZA(),e._uU(47," or "),e.TgZ(48,"code"),e._uU(49,"enum"),e.qZA(),e._uU(50," property depending on the type (supports arrays as well)"),e.qZA(),e.TgZ(51,"li"),e._uU(52,"set the "),e.TgZ(53,"code"),e._uU(54,"default"),e.qZA(),e._uU(55," property based on the assigned default value"),e.qZA(),e.TgZ(56,"li"),e._uU(57,"set several validation rules based on "),e.TgZ(58,"code"),e._uU(59,"class-validator"),e.qZA(),e._uU(60," decorators (if "),e.TgZ(61,"code"),e._uU(62,"classValidatorShim"),e.qZA(),e._uU(63," set to "),e.TgZ(64,"code"),e._uU(65,"true"),e.qZA(),e._uU(66,")"),e.qZA(),e.TgZ(67,"li"),e._uU(68,"add a response decorator to every endpoint with a proper status and "),e.TgZ(69,"code"),e._uU(70,"type"),e.qZA(),e._uU(71," (response model)"),e.qZA(),e.TgZ(72,"li"),e._uU(73,"generate descriptions for properties and endpoints based on comments (if "),e.TgZ(74,"code"),e._uU(75,"introspectComments"),e.qZA(),e._uU(76," set to "),e.TgZ(77,"code"),e._uU(78,"true"),e.qZA(),e._uU(79,")"),e.qZA(),e.TgZ(80,"li"),e._uU(81,"generate example values for properties based on comments (if "),e.TgZ(82,"code"),e._uU(83,"introspectComments"),e.qZA(),e._uU(84," set to "),e.TgZ(85,"code"),e._uU(86,"true"),e.qZA(),e._uU(87,")"),e.qZA()(),e.TgZ(88,"p"),e._uU(89,"Please, note that your filenames "),e.TgZ(90,"strong"),e._uU(91,"must have"),e.qZA(),e._uU(92," one of the following suffixes: "),e.TgZ(93,"code"),e._uU(94,"['.dto.ts', '.entity.ts']"),e.qZA(),e._uU(95," (e.g., "),e.TgZ(96,"code"),e._uU(97,"create-user.dto.ts"),e.qZA(),e._uU(98,") in order to be analysed by the plugin."),e.qZA(),e.TgZ(99,"p"),e._uU(100,"If you are using a different suffix, you can adjust the plugin's behavior by specifying the "),e.TgZ(101,"code"),e._uU(102,"dtoFileNameSuffix"),e.qZA(),e._uU(103," option (see below)."),e.qZA(),e.TgZ(104,"p"),e._uU(105,"Previously, if you wanted to provide an interactive experience with the Swagger UI,\nyou had to duplicate a lot of code to let the package know how your models/components should be declared in the specification. For example, you could define a simple "),e.TgZ(106,"code"),e._uU(107,"CreateUserDto"),e.qZA(),e._uU(108," class as follows:"),e.qZA(),e.TgZ(109,"pre")(110,"code",9),e._uU(111,"\nexport class CreateUserDto {\n  @ApiProperty()\n  email: string;\n\n  @ApiProperty()\n  password: string;\n\n  @ApiProperty({ enum: RoleEnum, default: [], isArray: true })\n  roles: RoleEnum[] = [];\n\n  @ApiProperty({ required: false, default: true })\n  isEnabled?: boolean = true;\n}\n"),e.qZA()(),e.TgZ(112,"p"),e._uU(113,"While not a significant issue with medium-sized projects, it becomes verbose & hard to maintain once you have a large set of classes."),e.qZA(),e.TgZ(114,"p"),e._uU(115,"By "),e.TgZ(116,"a",10),e._uU(117,"enabling the Swagger plugin"),e.qZA(),e._uU(118,", the above class definition can be declared simply:"),e.qZA(),e.TgZ(119,"pre")(120,"code",9),e._uU(121,"\nexport class CreateUserDto {\n  email: string;\n  password: string;\n  roles: RoleEnum[] = [];\n  isEnabled?: boolean = true;\n}\n"),e.qZA()(),e.TgZ(122,"blockquote",7)(123,"strong"),e._uU(124,"Note"),e.qZA(),e._uU(125," The Swagger plugin will derive the @ApiProperty() annotations from the TypeScript types and class-validator decorators. This helps in clearly describing your API for the generated Swagger UI documentation. However, the validation at runtime would still be handled by class-validator decorators. So, it is required to continue using validators like "),e.TgZ(126,"code"),e._uU(127,"IsEmail()"),e.qZA(),e._uU(128,", "),e.TgZ(129,"code"),e._uU(130,"IsNumber()"),e.qZA(),e._uU(131,", etc.\n"),e.qZA(),e.TgZ(132,"p"),e._uU(133,"Hence, if you intend to relay on automatic annotations for generating documentations and still wish for runtime validations, then the class-validator decorators are still necessary."),e.qZA(),e.TgZ(134,"blockquote",7)(135,"strong"),e._uU(136,"Hint"),e.qZA(),e._uU(137," When using "),e.TgZ(138,"a",11),e._uU(139,"mapped types utilities"),e.qZA(),e._uU(140," (like "),e.TgZ(141,"code"),e._uU(142,"PartialType"),e.qZA(),e._uU(143,") in DTOs import them from "),e.TgZ(144,"code"),e._uU(145,"@nestjs/swagger"),e.qZA(),e._uU(146," instead of "),e.TgZ(147,"code"),e._uU(148,"@nestjs/mapped-types"),e.qZA(),e._uU(149," for the plugin to pick up the schema.\n"),e.qZA(),e.TgZ(150,"p"),e._uU(151,"The plugin adds appropriate decorators on the fly based on the "),e.TgZ(152,"strong"),e._uU(153,"Abstract Syntax Tree"),e.qZA(),e._uU(154,". Thus you won't have to struggle with "),e.TgZ(155,"code"),e._uU(156,"@ApiProperty"),e.qZA(),e._uU(157," decorators scattered throughout the code."),e.qZA(),e.TgZ(158,"blockquote",7)(159,"strong"),e._uU(160,"Hint"),e.qZA(),e._uU(161," The plugin will automatically generate any missing swagger properties, but if you need to override them, you simply set them explicitly via "),e.TgZ(162,"code"),e._uU(163,"@ApiProperty()"),e.qZA(),e._uU(164,".\n"),e.qZA(),e.TgZ(165,"h4",12)(166,"span"),e._uU(167,"Comments introspection"),e.qZA()(),e.TgZ(168,"p"),e._uU(169,"With the comments introspection feature enabled, CLI plugin will generate descriptions and example values for properties based on comments."),e.qZA(),e.TgZ(170,"p"),e._uU(171,"For example, given an example "),e.TgZ(172,"code"),e._uU(173,"roles"),e.qZA(),e._uU(174," property:"),e.qZA(),e.TgZ(175,"pre")(176,"code",9),e._uU(177,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\n@ApiProperty({\n  description: `A list of user's roles`,\n  example: ['admin'],\n})\nroles: RoleEnum[] = [];\n"),e.qZA()(),e.TgZ(178,"p"),e._uU(179,"You must duplicate both description and example values. With "),e.TgZ(180,"code"),e._uU(181,"introspectComments"),e.qZA(),e._uU(182," enabled, the CLI plugin can extract these comments and automatically provide descriptions (and examples, if defined) for properties. Now, the above property can be declared simply as follows:"),e.qZA(),e.TgZ(183,"pre")(184,"code",9),e._uU(185,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\nroles: RoleEnum[] = [];\n"),e.qZA()(),e.TgZ(186,"p"),e._uU(187,"There are "),e.TgZ(188,"code"),e._uU(189,"dtoKeyOfComment"),e.qZA(),e._uU(190," and "),e.TgZ(191,"code"),e._uU(192,"controllerKeyOfComment"),e.qZA(),e._uU(193," plugin options that you can use to customize how the plugin will set the value for "),e.TgZ(194,"code"),e._uU(195,"ApiProperty"),e.qZA(),e._uU(196," and "),e.TgZ(197,"code"),e._uU(198,"ApiOperation"),e.qZA(),e._uU(199," decorators respectively. Take a look at the following example:"),e.qZA(),e.TgZ(200,"pre")(201,"code",9),e._uU(202,"\nexport class SomeController {\n  /**\n   * Create some resource\n   */\n  @Post()\n  create() {}\n}\n"),e.qZA()(),e.TgZ(203,"p"),e._uU(204,"By default, these options are set to "),e.TgZ(205,"code"),e._uU(206,'"description"'),e.qZA(),e._uU(207,". This means the plugin will assign "),e.TgZ(208,"code"),e._uU(209,'"Create some resource"'),e.qZA(),e._uU(210," to "),e.TgZ(211,"code"),e._uU(212,"description"),e.qZA(),e._uU(213," key on the "),e.TgZ(214,"code"),e._uU(215,"ApiOperation"),e.qZA(),e._uU(216," operator. Like so:"),e.qZA(),e.TgZ(217,"pre")(218,"code",13),e._uU(219,'\n@ApiOperation({ description: "Create some resource" })\n'),e.qZA()(),e.TgZ(220,"blockquote",7)(221,"strong"),e._uU(222,"Hint"),e.qZA(),e._uU(223," For models, the same logic applies but to "),e.TgZ(224,"code"),e._uU(225,"ApiProperty"),e.qZA(),e._uU(226," decorator instead.\n"),e.qZA(),e.TgZ(227,"h4",14)(228,"span"),e._uU(229,"Using the CLI plugin"),e.qZA()(),e.TgZ(230,"p"),e._uU(231,"To enable the plugin, open "),e.TgZ(232,"code"),e._uU(233,"nest-cli.json"),e.qZA(),e._uU(234," (if you use "),e.TgZ(235,"a",15),e._uU(236,"Nest CLI"),e.qZA(),e._uU(237,") and add the following "),e.TgZ(238,"code"),e._uU(239,"plugins"),e.qZA(),e._uU(240," configuration:"),e.qZA(),e.TgZ(241,"pre")(242,"code",16),e._uU(243,'\n{\n  "collection": "@nestjs/schematics",\n  "sourceRoot": "src",\n  "compilerOptions": {\n    "plugins": ["@nestjs/swagger"]\n  }\n}\n'),e.qZA()(),e.TgZ(244,"p"),e._uU(245,"You can use the "),e.TgZ(246,"code"),e._uU(247,"options"),e.qZA(),e._uU(248," property to customize the behavior of the plugin."),e.qZA(),e.TgZ(249,"pre")(250,"code",16),e._uU(251,'\n"plugins": [\n  {\n    "name": "@nestjs/swagger",\n    "options": {\n      "classValidatorShim": false,\n      "introspectComments": true\n    }\n  }\n]\n'),e.qZA()(),e.TgZ(252,"p"),e._uU(253,"The "),e.TgZ(254,"code"),e._uU(255,"options"),e.qZA(),e._uU(256," property has to fulfill the following interface:"),e.qZA(),e.TgZ(257,"pre")(258,"code",9),e._uU(259,"\nexport interface PluginOptions {\n  dtoFileNameSuffix?: string[];\n  controllerFileNameSuffix?: string[];\n  classValidatorShim?: boolean;\n  dtoKeyOfComment?: string;\n  controllerKeyOfComment?: string;\n  introspectComments?: boolean;\n}\n"),e.qZA()(),e.TgZ(260,"table")(261,"tr")(262,"th"),e._uU(263,"Option"),e.qZA(),e.TgZ(264,"th"),e._uU(265,"Default"),e.qZA(),e.TgZ(266,"th"),e._uU(267,"Description"),e.qZA()(),e.TgZ(268,"tr")(269,"td")(270,"code"),e._uU(271,"dtoFileNameSuffix"),e.qZA()(),e.TgZ(272,"td")(273,"code"),e._uU(274,"['.dto.ts', '.entity.ts']"),e.qZA()(),e.TgZ(275,"td"),e._uU(276,"DTO (Data Transfer Object) files suffix"),e.qZA()(),e.TgZ(277,"tr")(278,"td")(279,"code"),e._uU(280,"controllerFileNameSuffix"),e.qZA()(),e.TgZ(281,"td")(282,"code"),e._uU(283,".controller.ts"),e.qZA()(),e.TgZ(284,"td"),e._uU(285,"Controller files suffix"),e.qZA()(),e.TgZ(286,"tr")(287,"td")(288,"code"),e._uU(289,"classValidatorShim"),e.qZA()(),e.TgZ(290,"td")(291,"code"),e._uU(292,"true"),e.qZA()(),e.TgZ(293,"td"),e._uU(294,"If set to true, the module will reuse "),e.TgZ(295,"code"),e._uU(296,"class-validator"),e.qZA(),e._uU(297," validation decorators (e.g. "),e.TgZ(298,"code"),e._uU(299,"@Max(10)"),e.qZA(),e._uU(300," will add "),e.TgZ(301,"code"),e._uU(302,"max: 10"),e.qZA(),e._uU(303," to schema definition) "),e.qZA()(),e.TgZ(304,"tr")(305,"td")(306,"code"),e._uU(307,"dtoKeyOfComment"),e.qZA()(),e.TgZ(308,"td")(309,"code"),e._uU(310,"'description'"),e.qZA()(),e.TgZ(311,"td"),e._uU(312,"The property key to set the comment text to on "),e.TgZ(313,"code"),e._uU(314,"ApiProperty"),e.qZA(),e._uU(315,"."),e.qZA()(),e.TgZ(316,"tr")(317,"td")(318,"code"),e._uU(319,"controllerKeyOfComment"),e.qZA()(),e.TgZ(320,"td")(321,"code"),e._uU(322,"'description'"),e.qZA()(),e.TgZ(323,"td"),e._uU(324,"The property key to set the comment text to on "),e.TgZ(325,"code"),e._uU(326,"ApiOperation"),e.qZA(),e._uU(327,"."),e.qZA()(),e.TgZ(328,"tr")(329,"td")(330,"code"),e._uU(331,"introspectComments"),e.qZA()(),e.TgZ(332,"td")(333,"code"),e._uU(334,"false"),e.qZA()(),e.TgZ(335,"td"),e._uU(336,"If set to true, plugin will generate descriptions and example values for properties based on comments"),e.qZA()()(),e.TgZ(337,"p"),e._uU(338,"Make sure to delete the "),e.TgZ(339,"code"),e._uU(340,"/dist"),e.qZA(),e._uU(341," folder and rebuild your application whenever plugin options are updated.\nIf you don't use the CLI but instead have a custom "),e.TgZ(342,"code"),e._uU(343,"webpack"),e.qZA(),e._uU(344," configuration, you can use this plugin in combination with "),e.TgZ(345,"code"),e._uU(346,"ts-loader"),e.qZA(),e._uU(347,":"),e.qZA(),e.TgZ(348,"pre")(349,"code",16),e._uU(350,"\ngetCustomTransformers: (program: any) => ({\n  before: [require('@nestjs/swagger/plugin').before({}, program)]\n}),\n"),e.qZA()(),e.TgZ(351,"h4",17)(352,"span"),e._uU(353,"SWC builder"),e.qZA()(),e.TgZ(354,"p"),e._uU(355,"For standard setups (non-monorepo), to use CLI Plugins with the SWC builder, you need to enable type checking, as described "),e.TgZ(356,"a",18),e._uU(357,"here"),e.qZA(),e._uU(358,"."),e.qZA(),e.TgZ(359,"pre")(360,"code",19),e._uU(361,"\n$ nest start -b swc --type-check\n"),e.qZA()(),e.TgZ(362,"p"),e._uU(363,"For monorepo setups, follow the instructions "),e.TgZ(364,"a",20),e._uU(365,"here"),e.qZA(),e._uU(366,"."),e.qZA(),e.TgZ(367,"pre")(368,"code",19),e._uU(369,"\n$ npx ts-node src/generate-metadata.ts\n# OR npx ts-node apps/{YOUR_APP}/src/generate-metadata.ts\n"),e.qZA()(),e.TgZ(370,"p"),e._uU(371,"Now, the serialized metadata file must be loaded by the "),e.TgZ(372,"code"),e._uU(373,"SwaggerModule#loadPluginMetadata"),e.qZA(),e._uU(374," method, as shown below:"),e.qZA(),e.TgZ(375,"pre")(376,"code",9),e._uU(377,"\nimport metadata from './metadata'; // <-- file auto-generated by the \"PluginMetadataGenerator\"\n\nawait SwaggerModule.loadPluginMetadata(metadata); // <-- here\nconst document = SwaggerModule.createDocument(app, config);\n"),e.qZA()(),e.TgZ(378,"h4",21)(379,"span"),e._uU(380,"Integration with "),e.TgZ(381,"code"),e._uU(382,"ts-jest"),e.qZA(),e._uU(383," (e2e tests)"),e.qZA()(),e.TgZ(384,"p"),e._uU(385,"To run e2e tests, "),e.TgZ(386,"code"),e._uU(387,"ts-jest"),e.qZA(),e._uU(388," compiles your source code files on the fly, in memory. This means, it doesn't use Nest CLI compiler and does not apply any plugins or perform AST transformations."),e.qZA(),e.TgZ(389,"p"),e._uU(390,"To enable the plugin, create the following file in your e2e tests directory:"),e.qZA(),e.TgZ(391,"pre")(392,"code",16),e._uU(393,"\nconst transformer = require('@nestjs/swagger/plugin');\n\nmodule.exports.name = 'nestjs-swagger-transformer';\n// you should change the version number anytime you change the configuration below - otherwise, jest will not detect changes\nmodule.exports.version = 1;\n\nmodule.exports.factory = (cs) => {\n  return transformer.before(\n    {\n      // @nestjs/swagger/plugin options (can be empty)\n    },\n    cs.program, // \"cs.tsCompiler.program\" for older versions of Jest (<= v27)\n  );\n};\n"),e.qZA()(),e.TgZ(394,"p"),e._uU(395,"With this in place, import AST transformer within your "),e.TgZ(396,"code"),e._uU(397,"jest"),e.qZA(),e._uU(398," configuration file. By default (in the starter application), e2e tests configuration file is located under the "),e.TgZ(399,"code"),e._uU(400,"test"),e.qZA(),e._uU(401," folder and is named "),e.TgZ(402,"code"),e._uU(403,"jest-e2e.json"),e.qZA(),e._uU(404,"."),e.qZA(),e.TgZ(405,"pre")(406,"code",22),e._uU(407,'\n{\n  ... // other configuration\n  "globals": {\n    "ts-jest": {\n      "astTransformers": {\n        "before": ["<path to the file created above>"]\n      }\n    }\n  }\n}\n'),e.qZA()(),e.TgZ(408,"p"),e._uU(409,"If you use "),e.TgZ(410,"code"),e._uU(411,"jest@^29"),e.qZA(),e._uU(412,", then use the snippet below, as the previous approach got deprecated."),e.qZA(),e.TgZ(413,"pre")(414,"code",22),e._uU(415,'\n{\n  ... // other configuration\n  "transform": {\n    "^.+\\\\.(t|j)s$": [\n      "ts-jest",\n      {\n        "astTransformers": {\n          "before": ["<path to the file created above>"]\n        }\n      }\n    ]\n  }\n}\n'),e.qZA()(),e.TgZ(416,"h4",23)(417,"span"),e._uU(418,"Troubleshooting "),e.TgZ(419,"code"),e._uU(420,"jest"),e.qZA(),e._uU(421," (e2e tests)"),e.qZA()(),e.TgZ(422,"p"),e._uU(423,"In case "),e.TgZ(424,"code"),e._uU(425,"jest"),e.qZA(),e._uU(426," does not seem to pick up your configuration changes, it's possible that Jest has already "),e.TgZ(427,"strong"),e._uU(428,"cached"),e.qZA(),e._uU(429," the build result. To apply the new configuration, you need to clear Jest's cache directory."),e.qZA(),e.TgZ(430,"p"),e._uU(431,"To clear the cache directory, run the following command in your NestJS project folder:"),e.qZA(),e.TgZ(432,"pre")(433,"code",19),e._uU(434,"\n$ npx jest --clearCache\n"),e.qZA()(),e.TgZ(435,"p"),e._uU(436,"In case the automatic cache clearance fails, you can still manually remove the cache folder with the following commands:"),e.qZA(),e.TgZ(437,"pre")(438,"code",19),e._uU(439,'\n# Find jest cache directory (usually /tmp/jest_rs)\n# by running the following command in your NestJS project root\n$ npx jest --showConfig | grep cache\n# ex result:\n#   "cache": true,\n#   "cacheDirectory": "/tmp/jest_rs"\n\n# Remove or empty the Jest cache directory\n$ rm -rf  <cacheDirectory value>\n# ex:\n# rm -rf /tmp/jest_rs\n'),e.qZA()()())},dependencies:[i.U,u.rH],encapsulation:2,changeDetection:0})}return t})(),g=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-decorators"]],features:[e.qOj],decls:141,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/decorators.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","decorators"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Decorators"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"All of the available OpenAPI decorators have an "),e.TgZ(9,"code"),e._uU(10,"Api"),e.qZA(),e._uU(11," prefix to distinguish them from the core decorators. Below is a full list of the exported decorators along with a designation of the level at which the decorator may be applied."),e.qZA(),e.TgZ(12,"table"),e._UZ(13,"thead"),e.TgZ(14,"tbody")(15,"tr")(16,"td")(17,"code"),e._uU(18,"@ApiBasicAuth()"),e.qZA()(),e.TgZ(19,"td"),e._uU(20,"Method / Controller"),e.qZA()(),e.TgZ(21,"tr")(22,"td")(23,"code"),e._uU(24,"@ApiBearerAuth()"),e.qZA()(),e.TgZ(25,"td"),e._uU(26,"Method / Controller"),e.qZA()(),e.TgZ(27,"tr")(28,"td")(29,"code"),e._uU(30,"@ApiBody()"),e.qZA()(),e.TgZ(31,"td"),e._uU(32,"Method"),e.qZA()(),e.TgZ(33,"tr")(34,"td")(35,"code"),e._uU(36,"@ApiConsumes()"),e.qZA()(),e.TgZ(37,"td"),e._uU(38,"Method / Controller"),e.qZA()(),e.TgZ(39,"tr")(40,"td")(41,"code"),e._uU(42,"@ApiCookieAuth()"),e.qZA()(),e.TgZ(43,"td"),e._uU(44,"Method / Controller"),e.qZA()(),e.TgZ(45,"tr")(46,"td")(47,"code"),e._uU(48,"@ApiExcludeController()"),e.qZA()(),e.TgZ(49,"td"),e._uU(50,"Controller"),e.qZA()(),e.TgZ(51,"tr")(52,"td")(53,"code"),e._uU(54,"@ApiExcludeEndpoint()"),e.qZA()(),e.TgZ(55,"td"),e._uU(56,"Method"),e.qZA()(),e.TgZ(57,"tr")(58,"td")(59,"code"),e._uU(60,"@ApiExtension()"),e.qZA()(),e.TgZ(61,"td"),e._uU(62,"Method"),e.qZA()(),e.TgZ(63,"tr")(64,"td")(65,"code"),e._uU(66,"@ApiExtraModels()"),e.qZA()(),e.TgZ(67,"td"),e._uU(68,"Method / Controller"),e.qZA()(),e.TgZ(69,"tr")(70,"td")(71,"code"),e._uU(72,"@ApiHeader()"),e.qZA()(),e.TgZ(73,"td"),e._uU(74,"Method / Controller"),e.qZA()(),e.TgZ(75,"tr")(76,"td")(77,"code"),e._uU(78,"@ApiHideProperty()"),e.qZA()(),e.TgZ(79,"td"),e._uU(80,"Model"),e.qZA()(),e.TgZ(81,"tr")(82,"td")(83,"code"),e._uU(84,"@ApiOAuth2()"),e.qZA()(),e.TgZ(85,"td"),e._uU(86,"Method / Controller"),e.qZA()(),e.TgZ(87,"tr")(88,"td")(89,"code"),e._uU(90,"@ApiOperation()"),e.qZA()(),e.TgZ(91,"td"),e._uU(92,"Method"),e.qZA()(),e.TgZ(93,"tr")(94,"td")(95,"code"),e._uU(96,"@ApiParam()"),e.qZA()(),e.TgZ(97,"td"),e._uU(98,"Method"),e.qZA()(),e.TgZ(99,"tr")(100,"td")(101,"code"),e._uU(102,"@ApiProduces()"),e.qZA()(),e.TgZ(103,"td"),e._uU(104,"Method / Controller"),e.qZA()(),e.TgZ(105,"tr")(106,"td")(107,"code"),e._uU(108,"@ApiProperty()"),e.qZA()(),e.TgZ(109,"td"),e._uU(110,"Model"),e.qZA()(),e.TgZ(111,"tr")(112,"td")(113,"code"),e._uU(114,"@ApiPropertyOptional()"),e.qZA()(),e.TgZ(115,"td"),e._uU(116,"Model"),e.qZA()(),e.TgZ(117,"tr")(118,"td")(119,"code"),e._uU(120,"@ApiQuery()"),e.qZA()(),e.TgZ(121,"td"),e._uU(122,"Method"),e.qZA()(),e.TgZ(123,"tr")(124,"td")(125,"code"),e._uU(126,"@ApiResponse()"),e.qZA()(),e.TgZ(127,"td"),e._uU(128,"Method / Controller"),e.qZA()(),e.TgZ(129,"tr")(130,"td")(131,"code"),e._uU(132,"@ApiSecurity()"),e.qZA()(),e.TgZ(133,"td"),e._uU(134,"Method / Controller"),e.qZA()(),e.TgZ(135,"tr")(136,"td")(137,"code"),e._uU(138,"@ApiTags()"),e.qZA()(),e.TgZ(139,"td"),e._uU(140,"Method / Controller"),e.qZA()()()()())},encapsulation:2,changeDetection:0})}return t})();var Z=r(328),U=r(8327);let A=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-introduction"]],features:[e.qOj],decls:185,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/introduction.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","introduction"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/swagger"],["appAnchor","","id","installation"],[1,"language-bash"],["appAnchor","","id","bootstrap"],[1,"filename"],["app836ea98e40cc3d07d9ec24315976bf53a8ddd2fd",""],[1,"language-typescript"],[1,"info"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#openapi-document"],["href","/openapi/introduction#document-options"],["href","/openapi/introduction#setup-options"],["src","/assets/swagger1.png"],[1,"warning"],["rel","nofollow","target","_blank","href","https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"],["appAnchor","","id","document-options"],[1,"language-TypeScript"],["appAnchor","","id","setup-options"],["appAnchor","","id","example"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/nest/tree/master/sample/11-swagger"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Introduction"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"The "),e.TgZ(9,"a",6),e._uU(10,"OpenAPI"),e.qZA(),e._uU(11," specification is a language-agnostic definition format used to describe RESTful APIs. Nest provides a dedicated "),e.TgZ(12,"a",7),e._uU(13,"module"),e.qZA(),e._uU(14," which allows generating such a specification by leveraging decorators."),e.qZA(),e.TgZ(15,"h4",8)(16,"span"),e._uU(17,"Installation"),e.qZA()(),e.TgZ(18,"p"),e._uU(19,"To begin using it, we first install the required dependency."),e.qZA(),e.TgZ(20,"pre")(21,"code",9),e._uU(22,"\n$ npm install --save @nestjs/swagger\n"),e.qZA()(),e.TgZ(23,"h4",10)(24,"span"),e._uU(25,"Bootstrap"),e.qZA()(),e.TgZ(26,"p"),e._uU(27,"Once the installation process is complete, open the "),e.TgZ(28,"code"),e._uU(29,"main.ts"),e.qZA(),e._uU(30," file and initialize Swagger using the "),e.TgZ(31,"code"),e._uU(32,"SwaggerModule"),e.qZA(),e._uU(33," class:"),e.qZA(),e.TgZ(34,"span",11),e._uU(35),e.ALo(36,"extension"),e._UZ(37,"app-tabs",null,12),e.qZA(),e.TgZ(39,"pre")(40,"code",13),e._uU(41,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  const config = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n  const document = SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('api', app, document);\n\n  await app.listen(3000);\n}\nbootstrap();\n"),e.qZA()(),e.TgZ(42,"blockquote",14)(43,"strong"),e._uU(44,"Hint"),e.qZA(),e.TgZ(45,"code"),e._uU(46,"document"),e.qZA(),e._uU(47," (returned by the "),e.TgZ(48,"code"),e._uU(49,"SwaggerModule#createDocument()"),e.qZA(),e._uU(50," method) is a serializable object conforming to "),e.TgZ(51,"a",15),e._uU(52,"OpenAPI Document"),e.qZA(),e._uU(53,". Instead of hosting it via HTTP, you could also save it as a JSON/YAML file, and consume it in different ways.\n"),e.qZA(),e.TgZ(54,"p"),e._uU(55,"The "),e.TgZ(56,"code"),e._uU(57,"DocumentBuilder"),e.qZA(),e._uU(58," helps to structure a base document that conforms to the OpenAPI Specification. It provides several methods that allow setting such properties as title, description, version, etc. In order to create a full document (with all HTTP routes defined) we use the "),e.TgZ(59,"code"),e._uU(60,"createDocument()"),e.qZA(),e._uU(61," method of the "),e.TgZ(62,"code"),e._uU(63,"SwaggerModule"),e.qZA(),e._uU(64," class. This method takes two arguments, an application instance and a Swagger options object. Alternatively, we can provide a third argument, which should be of type "),e.TgZ(65,"code"),e._uU(66,"SwaggerDocumentOptions"),e.qZA(),e._uU(67,". More on this in the "),e.TgZ(68,"a",16),e._uU(69,"Document options section"),e.qZA(),e._uU(70,"."),e.qZA(),e.TgZ(71,"p"),e._uU(72,"Once we create a document, we can call the "),e.TgZ(73,"code"),e._uU(74,"setup()"),e.qZA(),e._uU(75," method. It accepts:"),e.qZA(),e.TgZ(76,"ol")(77,"li"),e._uU(78,"The path to mount the Swagger UI"),e.qZA(),e.TgZ(79,"li"),e._uU(80,"An application instance"),e.qZA(),e.TgZ(81,"li"),e._uU(82,"The document object instantiated above"),e.qZA(),e.TgZ(83,"li"),e._uU(84,"Optional configuration parameter (read more "),e.TgZ(85,"a",17),e._uU(86,"here"),e.qZA(),e._uU(87,")"),e.qZA()(),e.TgZ(88,"p"),e._uU(89,"Now you can run the following command to start the HTTP server:"),e.qZA(),e.TgZ(90,"pre")(91,"code",9),e._uU(92,"\n$ npm run start\n"),e.qZA()(),e.TgZ(93,"p"),e._uU(94,"While the application is running, open your browser and navigate to "),e.TgZ(95,"code"),e._uU(96,"http://localhost:3000/api"),e.qZA(),e._uU(97,". You should see the Swagger UI."),e.qZA(),e.TgZ(98,"figure"),e._UZ(99,"img",18),e.qZA(),e.TgZ(100,"p"),e._uU(101,"As you can see, the "),e.TgZ(102,"code"),e._uU(103,"SwaggerModule"),e.qZA(),e._uU(104," automatically reflects all of your endpoints."),e.qZA(),e.TgZ(105,"blockquote",14)(106,"strong"),e._uU(107,"Hint"),e.qZA(),e._uU(108," To generate and download a Swagger JSON file, navigate to "),e.TgZ(109,"code"),e._uU(110,"http://localhost:3000/api-json"),e.qZA(),e._uU(111," (assuming that your Swagger documentation is available under "),e.TgZ(112,"code"),e._uU(113,"http://localhost:3000/api"),e.qZA(),e._uU(114,").\nIt is also possible to expose it on a route of your choice using only the setup method from "),e.TgZ(115,"code"),e._uU(116,"@nestjs/swagger"),e.qZA(),e._uU(117,", like this:\n"),e.TgZ(118,"pre")(119,"code",13),e._uU(120,"\nSwaggerModule.setup('swagger', app, document, {\n  jsonDocumentUrl: 'swagger/json',\n});\n"),e.qZA()(),e.TgZ(121,"p"),e._uU(122,"Which would expose it at "),e.TgZ(123,"code"),e._uU(124,"http://localhost:3000/swagger/json"),e.qZA()()(),e.TgZ(125,"blockquote",19)(126,"strong"),e._uU(127,"Warning"),e.qZA(),e._uU(128," When using "),e.TgZ(129,"code"),e._uU(130,"fastify"),e.qZA(),e._uU(131," and "),e.TgZ(132,"code"),e._uU(133,"helmet"),e.qZA(),e._uU(134,", there may be a problem with "),e.TgZ(135,"a",20),e._uU(136,"CSP"),e.qZA(),e._uU(137,", to solve this collision, configure the CSP as shown below:\n"),e.TgZ(138,"pre")(139,"code",13),e._uU(140,"\napp.register(helmet, {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [`'self'`],\n      styleSrc: [`'self'`, `'unsafe-inline'`],\n      imgSrc: [`'self'`, 'data:', 'validator.swagger.io'],\n      scriptSrc: [`'self'`, `https: 'unsafe-inline'`],\n    },\n  },\n});\n\n// If you are not going to use CSP at all, you can use this:\napp.register(helmet, {\n  contentSecurityPolicy: false,\n});\n"),e.qZA()()(),e.TgZ(141,"h4",21)(142,"span"),e._uU(143,"Document options"),e.qZA()(),e.TgZ(144,"p"),e._uU(145,"When creating a document, it is possible to provide some extra options to fine tune the library's behavior. These options should be of type "),e.TgZ(146,"code"),e._uU(147,"SwaggerDocumentOptions"),e.qZA(),e._uU(148,", which can be the following:"),e.qZA(),e.TgZ(149,"pre")(150,"code",22),e._uU(151,"\nexport interface SwaggerDocumentOptions {\n  /**\n   * List of modules to include in the specification\n   */\n  include?: Function[];\n\n  /**\n   * Additional, extra models that should be inspected and included in the specification\n   */\n  extraModels?: Function[];\n\n  /**\n   * If `true`, swagger will ignore the global prefix set through `setGlobalPrefix()` method\n   */\n  ignoreGlobalPrefix?: boolean;\n\n  /**\n   * If `true`, swagger will also load routes from the modules imported by `include` modules\n   */\n  deepScanRoutes?: boolean;\n\n  /**\n   * Custom operationIdFactory that will be used to generate the `operationId`\n   * based on the `controllerKey` and `methodKey`\n   * @default () => controllerKey_methodKey\n   */\n  operationIdFactory?: (controllerKey: string, methodKey: string) => string;\n}\n"),e.qZA()(),e.TgZ(152,"p"),e._uU(153,"For example, if you want to make sure that the library generates operation names like "),e.TgZ(154,"code"),e._uU(155,"createUser"),e.qZA(),e._uU(156," instead of "),e.TgZ(157,"code"),e._uU(158,"UserController_createUser"),e.qZA(),e._uU(159,", you can set the following:"),e.qZA(),e.TgZ(160,"pre")(161,"code",22),e._uU(162,"\nconst options: SwaggerDocumentOptions =  {\n  operationIdFactory: (\n    controllerKey: string,\n    methodKey: string\n  ) => methodKey\n};\nconst document = SwaggerModule.createDocument(app, config, options);\n"),e.qZA()(),e.TgZ(163,"h4",23)(164,"span"),e._uU(165,"Setup options"),e.qZA()(),e.TgZ(166,"p"),e._uU(167,"You can configure Swagger UI by passing the options object which fulfills the "),e.TgZ(168,"code"),e._uU(169,"SwaggerCustomOptions"),e.qZA(),e._uU(170," interface as a fourth argument of the "),e.TgZ(171,"code"),e._uU(172,"SwaggerModule#setup"),e.qZA(),e._uU(173," method."),e.qZA(),e.TgZ(174,"pre")(175,"code",22),e._uU(176,"\nexport interface SwaggerCustomOptions {\n  /**\n   * If `true`, Swagger resources paths will be prefixed by the global prefix set through `setGlobalPrefix()`.\n   * Default: `false`.\n   * @see https://docs.nestjs.com/faq/global-prefix\n   */\n  useGlobalPrefix?: boolean;\n\n  /**\n   * If `false`, only API definitions (JSON and YAML) will be served (on `/{path}-json` and `/{path}-yaml`).\n   * This is particularly useful if you are already hosting a Swagger UI somewhere else and just want to serve API definitions.\n   * Default: `true`.\n   */\n  swaggerUiEnabled?: boolean;\n\n  /**\n   * Url point the API definition to load in Swagger UI.\n   */\n  swaggerUrl?: string;\n\n  /**\n   * Path of the JSON API definition to serve.\n   * Default: `<path>-json`.\n   */\n  jsonDocumentUrl?: string;\n\n  /**\n   * Path of the YAML API definition to serve.\n   * Default: `<path>-yaml`.\n   */\n  yamlDocumentUrl?: string;\n\n  /**\n   * Hook allowing to alter the OpenAPI document before being served.\n   * It's called after the document is generated and before it is served as JSON & YAML.\n   */\n  patchDocumentOnRequest?: <TRequest = any, TResponse = any>(\n    req: TRequest,\n    res: TResponse,\n    document: OpenAPIObject\n  ) => OpenAPIObject;\n\n  /**\n   * If `true`, the selector of OpenAPI definitions is displayed in the Swagger UI interface.\n   * Default: `false`.\n   */\n  explorer?: boolean;\n\n  /**\n   * Additional Swagger UI options\n   */\n  swaggerOptions?: SwaggerUiOptions;\n\n  /**\n   * Custom CSS styles to inject in Swagger UI page.\n   */\n  customCss?: string;\n\n  /**\n   * URL(s) of a custom CSS stylesheet to load in Swagger UI page.\n   */\n  customCssUrl?: string | string[];\n\n  /**\n   * URL(s) of custom JavaScript files to load in Swagger UI page.\n   */\n  customJs?: string | string[];\n\n  /**\n   * Custom JavaScript scripts to load in Swagger UI page.\n   */\n  customJsStr?: string | string[];\n\n  /**\n   * Custom favicon for Swagger UI page.\n   */\n  customfavIcon?: string;\n\n  /**\n   * Custom title for Swagger UI page.\n   */\n  customSiteTitle?: string;\n\n  /**\n   * File system path (ex: ./node_modules/swagger-ui-dist) containing static Swagger UI assets.\n   */\n  customSwaggerUiPath?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  validatorUrl?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  url?: string;\n\n  /**\n   * @deprecated This property has no effect.\n   */\n  urls?: Record<'url' | 'name', string>[];\n\n}\n"),e.qZA()(),e.TgZ(177,"h4",24)(178,"span"),e._uU(179,"Example"),e.qZA()(),e.TgZ(180,"p"),e._uU(181,"A working example is available "),e.TgZ(182,"a",25),e._uU(183,"here"),e.qZA(),e._uU(184,"."),e.qZA()()),2&n){const C=e.MAs(38);e.xp6(35),e.hij(" ",e.xi3(36,1,"main",C.isJsActive),"\n")}},dependencies:[Z.n,i.U,U.F],encapsulation:2,changeDetection:0})}return t})(),h=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-mapped-types"]],features:[e.qOj],decls:169,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/mapped-types.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","mapped-types"],["appAnchor","","id","partial"],[1,"language-typescript"],[1,"info"],["appAnchor","","id","pick"],["appAnchor","","id","omit"],["appAnchor","","id","intersection"],["appAnchor","","id","composition"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Mapped types"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"As you build out features like "),e.TgZ(9,"strong"),e._uU(10,"CRUD"),e.qZA(),e._uU(11," (Create/Read/Update/Delete) it's often useful to construct variants on a base entity type. Nest provides several utility functions that perform type transformations to make this task more convenient."),e.qZA(),e.TgZ(12,"h4",6)(13,"span"),e._uU(14,"Partial"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"When building input validation types (also called DTOs), it's often useful to build "),e.TgZ(17,"strong"),e._uU(18,"create"),e.qZA(),e._uU(19," and "),e.TgZ(20,"strong"),e._uU(21,"update"),e.qZA(),e._uU(22," variations on the same type. For example, the "),e.TgZ(23,"strong"),e._uU(24,"create"),e.qZA(),e._uU(25," variant may require all fields, while the "),e.TgZ(26,"strong"),e._uU(27,"update"),e.qZA(),e._uU(28," variant may make all fields optional."),e.qZA(),e.TgZ(29,"p"),e._uU(30,"Nest provides the "),e.TgZ(31,"code"),e._uU(32,"PartialType()"),e.qZA(),e._uU(33," utility function to make this task easier and minimize boilerplate."),e.qZA(),e.TgZ(34,"p"),e._uU(35,"The "),e.TgZ(36,"code"),e._uU(37,"PartialType()"),e.qZA(),e._uU(38," function returns a type (class) with all the properties of the input type set to optional. For example, suppose we have a "),e.TgZ(39,"strong"),e._uU(40,"create"),e.qZA(),e._uU(41," type as follows:"),e.qZA(),e.TgZ(42,"pre")(43,"code",7),e._uU(44,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(45,"p"),e._uU(46,"By default, all of these fields are required. To create a type with the same fields, but with each one optional, use "),e.TgZ(47,"code"),e._uU(48,"PartialType()"),e.qZA(),e._uU(49," passing the class reference ("),e.TgZ(50,"code"),e._uU(51,"CreateCatDto"),e.qZA(),e._uU(52,") as an argument:"),e.qZA(),e.TgZ(53,"pre")(54,"code",7),e._uU(55,"\nexport class UpdateCatDto extends PartialType(CreateCatDto) {}\n"),e.qZA()(),e.TgZ(56,"blockquote",8)(57,"strong"),e._uU(58,"Hint"),e.qZA(),e._uU(59," The "),e.TgZ(60,"code"),e._uU(61,"PartialType()"),e.qZA(),e._uU(62," function is imported from the "),e.TgZ(63,"code"),e._uU(64,"@nestjs/swagger"),e.qZA(),e._uU(65," package.\n"),e.qZA(),e.TgZ(66,"h4",9)(67,"span"),e._uU(68,"Pick"),e.qZA()(),e.TgZ(69,"p"),e._uU(70,"The "),e.TgZ(71,"code"),e._uU(72,"PickType()"),e.qZA(),e._uU(73," function constructs a new type (class) by picking a set of properties from an input type. For example, suppose we start with a type like:"),e.qZA(),e.TgZ(74,"pre")(75,"code",7),e._uU(76,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(77,"p"),e._uU(78,"We can pick a set of properties from this class using the "),e.TgZ(79,"code"),e._uU(80,"PickType()"),e.qZA(),e._uU(81," utility function:"),e.qZA(),e.TgZ(82,"pre")(83,"code",7),e._uU(84,"\nexport class UpdateCatAgeDto extends PickType(CreateCatDto, ['age'] as const) {}\n"),e.qZA()(),e.TgZ(85,"blockquote",8)(86,"strong"),e._uU(87,"Hint"),e.qZA(),e._uU(88," The "),e.TgZ(89,"code"),e._uU(90,"PickType()"),e.qZA(),e._uU(91," function is imported from the "),e.TgZ(92,"code"),e._uU(93,"@nestjs/swagger"),e.qZA(),e._uU(94," package.\n"),e.qZA(),e.TgZ(95,"h4",10)(96,"span"),e._uU(97,"Omit"),e.qZA()(),e.TgZ(98,"p"),e._uU(99,"The "),e.TgZ(100,"code"),e._uU(101,"OmitType()"),e.qZA(),e._uU(102," function constructs a type by picking all properties from an input type and then removing a particular set of keys. For example, suppose we start with a type like:"),e.qZA(),e.TgZ(103,"pre")(104,"code",7),e._uU(105,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(106,"p"),e._uU(107,"We can generate a derived type that has every property "),e.TgZ(108,"strong"),e._uU(109,"except"),e.qZA(),e.TgZ(110,"code"),e._uU(111,"name"),e.qZA(),e._uU(112," as shown below. In this construct, the second argument to "),e.TgZ(113,"code"),e._uU(114,"OmitType"),e.qZA(),e._uU(115," is an array of property names."),e.qZA(),e.TgZ(116,"pre")(117,"code",7),e._uU(118,"\nexport class UpdateCatDto extends OmitType(CreateCatDto, ['name'] as const) {}\n"),e.qZA()(),e.TgZ(119,"blockquote",8)(120,"strong"),e._uU(121,"Hint"),e.qZA(),e._uU(122," The "),e.TgZ(123,"code"),e._uU(124,"OmitType()"),e.qZA(),e._uU(125," function is imported from the "),e.TgZ(126,"code"),e._uU(127,"@nestjs/swagger"),e.qZA(),e._uU(128," package.\n"),e.qZA(),e.TgZ(129,"h4",11)(130,"span"),e._uU(131,"Intersection"),e.qZA()(),e.TgZ(132,"p"),e._uU(133,"The "),e.TgZ(134,"code"),e._uU(135,"IntersectionType()"),e.qZA(),e._uU(136," function combines two types into one new type (class). For example, suppose we start with two types like:"),e.qZA(),e.TgZ(137,"pre")(138,"code",7),e._uU(139,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  breed: string;\n}\n\nexport class AdditionalCatInfo {\n  @ApiProperty()\n  color: string;\n}\n"),e.qZA()(),e.TgZ(140,"p"),e._uU(141,"We can generate a new type that combines all properties in both types."),e.qZA(),e.TgZ(142,"pre")(143,"code",7),e._uU(144,"\nexport class UpdateCatDto extends IntersectionType(\n  CreateCatDto,\n  AdditionalCatInfo,\n) {}\n"),e.qZA()(),e.TgZ(145,"blockquote",8)(146,"strong"),e._uU(147,"Hint"),e.qZA(),e._uU(148," The "),e.TgZ(149,"code"),e._uU(150,"IntersectionType()"),e.qZA(),e._uU(151," function is imported from the "),e.TgZ(152,"code"),e._uU(153,"@nestjs/swagger"),e.qZA(),e._uU(154," package.\n"),e.qZA(),e.TgZ(155,"h4",12)(156,"span"),e._uU(157,"Composition"),e.qZA()(),e.TgZ(158,"p"),e._uU(159,"The type mapping utility functions are composable. For example, the following will produce a type (class) that has all of the properties of the "),e.TgZ(160,"code"),e._uU(161,"CreateCatDto"),e.qZA(),e._uU(162," type except for "),e.TgZ(163,"code"),e._uU(164,"name"),e.qZA(),e._uU(165,", and those properties will be set to optional:"),e.qZA(),e.TgZ(166,"pre")(167,"code",7),e._uU(168,"\nexport class UpdateCatDto extends PartialType(\n  OmitType(CreateCatDto, ['name'] as const),\n) {}\n"),e.qZA()()())},dependencies:[i.U],encapsulation:2,changeDetection:0})}return t})();var _=r(2936);let T=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-openapi-migration"]],features:[e.qOj],decls:129,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/migration-guide.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","migration-guide"],["appAnchor","","id","breaking-changes"],["appAnchor","","id","new-methods"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Migration guide"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"If you're currently using "),e.TgZ(9,"code"),e._uU(10,"@nestjs/swagger@3.*"),e.qZA(),e._uU(11,", note the following breaking/API changes in version 4.0."),e.qZA(),e.TgZ(12,"h4",6)(13,"span"),e._uU(14,"Breaking changes"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"The following decorators have been changed/renamed:"),e.qZA(),e.TgZ(17,"ul")(18,"li")(19,"code"),e._uU(20,"@ApiModelProperty"),e.qZA(),e._uU(21," is now "),e.TgZ(22,"code"),e._uU(23,"@ApiProperty"),e.qZA()(),e.TgZ(24,"li")(25,"code"),e._uU(26,"@ApiModelPropertyOptional"),e.qZA(),e._uU(27," is now "),e.TgZ(28,"code"),e._uU(29,"@ApiPropertyOptional"),e.qZA()(),e.TgZ(30,"li")(31,"code"),e._uU(32,"@ApiResponseModelProperty"),e.qZA(),e._uU(33," is now "),e.TgZ(34,"code"),e._uU(35,"@ApiResponseProperty"),e.qZA()(),e.TgZ(36,"li")(37,"code"),e._uU(38,"@ApiImplicitQuery"),e.qZA(),e._uU(39," is now "),e.TgZ(40,"code"),e._uU(41,"@ApiQuery"),e.qZA()(),e.TgZ(42,"li")(43,"code"),e._uU(44,"@ApiImplicitParam"),e.qZA(),e._uU(45," is now "),e.TgZ(46,"code"),e._uU(47,"@ApiParam"),e.qZA()(),e.TgZ(48,"li")(49,"code"),e._uU(50,"@ApiImplicitBody"),e.qZA(),e._uU(51," is now "),e.TgZ(52,"code"),e._uU(53,"@ApiBody"),e.qZA()(),e.TgZ(54,"li")(55,"code"),e._uU(56,"@ApiImplicitHeader"),e.qZA(),e._uU(57," is now "),e.TgZ(58,"code"),e._uU(59,"@ApiHeader"),e.qZA()(),e.TgZ(60,"li")(61,"code"),e._uU(62),e.qZA(),e._uU(63," is now "),e.TgZ(64,"code"),e._uU(65),e.qZA()(),e.TgZ(66,"li")(67,"code"),e._uU(68,"@ApiUseTags"),e.qZA(),e._uU(69," is now "),e.TgZ(70,"code"),e._uU(71,"@ApiTags"),e.qZA()()(),e.TgZ(72,"p")(73,"code"),e._uU(74,"DocumentBuilder"),e.qZA(),e._uU(75," breaking changes (updated method signatures):"),e.qZA(),e.TgZ(76,"ul")(77,"li")(78,"code"),e._uU(79,"addTag"),e.qZA()(),e.TgZ(80,"li")(81,"code"),e._uU(82,"addBearerAuth"),e.qZA()(),e.TgZ(83,"li")(84,"code"),e._uU(85,"addOAuth2"),e.qZA()(),e.TgZ(86,"li")(87,"code"),e._uU(88,"setContactEmail"),e.qZA(),e._uU(89," is now "),e.TgZ(90,"code"),e._uU(91,"setContact"),e.qZA()(),e.TgZ(92,"li")(93,"code"),e._uU(94,"setHost"),e.qZA(),e._uU(95," has been removed"),e.qZA(),e.TgZ(96,"li")(97,"code"),e._uU(98,"setSchemes"),e.qZA(),e._uU(99," has been removed (use the "),e.TgZ(100,"code"),e._uU(101,"addServer"),e.qZA(),e._uU(102," instead, e.g., "),e.TgZ(103,"code"),e._uU(104,"addServer('http://')"),e.qZA(),e._uU(105,")"),e.qZA()(),e.TgZ(106,"h4",7)(107,"span"),e._uU(108,"New methods"),e.qZA()(),e.TgZ(109,"p"),e._uU(110,"The following methods have been added:"),e.qZA(),e.TgZ(111,"ul")(112,"li")(113,"code"),e._uU(114,"addServer"),e.qZA()(),e.TgZ(115,"li")(116,"code"),e._uU(117,"addApiKey"),e.qZA()(),e.TgZ(118,"li")(119,"code"),e._uU(120,"addBasicAuth"),e.qZA()(),e.TgZ(121,"li")(122,"code"),e._uU(123,"addSecurity"),e.qZA()(),e.TgZ(124,"li")(125,"code"),e._uU(126,"addSecurityRequirements"),e.qZA()()(),e.TgZ(127,"p"),e._UZ(128,"app-banner-devtools"),e.qZA()()),2&n&&(e.xp6(62),e.AsE("@ApiOperation(","{"," title: 'test' ","}",")"),e.xp6(3),e.AsE("@ApiOperation(","{"," summary: 'test' ","}",")"))},dependencies:[i.U,_.E],encapsulation:2,changeDetection:0})}return t})(),m=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-openapi-operations"]],features:[e.qOj],decls:366,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/operations.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","operations"],["appAnchor","","id","tags"],[1,"language-typescript"],["appAnchor","","id","headers"],["appAnchor","","id","responses"],["src","/assets/swagger-response-type.png"],["appAnchor","","id","file-upload"],["routerLink","/techniques/file-upload"],["appAnchor","","id","extensions"],["appAnchor","","id","advanced-generic-apiresponse"],["href","/openapi/types-and-parameters#raw-definitions"],[1,"language-ts"],["href","/openapi/types-and-parameters#extra-models"],[1,"language-json"],[1,"info"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Operations"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"In OpenAPI terms, paths are endpoints (resources), such as "),e.TgZ(9,"code"),e._uU(10,"/users"),e.qZA(),e._uU(11," or "),e.TgZ(12,"code"),e._uU(13,"/reports/summary"),e.qZA(),e._uU(14,", that your API exposes, and operations are the HTTP methods used to manipulate these paths, such as "),e.TgZ(15,"code"),e._uU(16,"GET"),e.qZA(),e._uU(17,", "),e.TgZ(18,"code"),e._uU(19,"POST"),e.qZA(),e._uU(20," or "),e.TgZ(21,"code"),e._uU(22,"DELETE"),e.qZA(),e._uU(23,"."),e.qZA(),e.TgZ(24,"h4",6)(25,"span"),e._uU(26,"Tags"),e.qZA()(),e.TgZ(27,"p"),e._uU(28,"To attach a controller to a specific tag, use the "),e.TgZ(29,"code"),e._uU(30,"@ApiTags(...tags)"),e.qZA(),e._uU(31," decorator."),e.qZA(),e.TgZ(32,"pre")(33,"code",7),e._uU(34,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(35,"h4",8)(36,"span"),e._uU(37,"Headers"),e.qZA()(),e.TgZ(38,"p"),e._uU(39,"To define custom headers that are expected as part of the request, use "),e.TgZ(40,"code"),e._uU(41,"@ApiHeader()"),e.qZA(),e._uU(42,"."),e.qZA(),e.TgZ(43,"pre")(44,"code",7),e._uU(45,"\n@ApiHeader({\n  name: 'X-MyHeader',\n  description: 'Custom header',\n})\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(46,"h4",9)(47,"span"),e._uU(48,"Responses"),e.qZA()(),e.TgZ(49,"p"),e._uU(50,"To define a custom HTTP response, use the "),e.TgZ(51,"code"),e._uU(52,"@ApiResponse()"),e.qZA(),e._uU(53," decorator."),e.qZA(),e.TgZ(54,"pre")(55,"code",7),e._uU(56,"\n@Post()\n@ApiResponse({ status: 201, description: 'The record has been successfully created.'})\n@ApiResponse({ status: 403, description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(57,"p"),e._uU(58,"Nest provides a set of short-hand "),e.TgZ(59,"strong"),e._uU(60,"API response"),e.qZA(),e._uU(61," decorators that inherit from the "),e.TgZ(62,"code"),e._uU(63,"@ApiResponse"),e.qZA(),e._uU(64," decorator:"),e.qZA(),e.TgZ(65,"ul")(66,"li")(67,"code"),e._uU(68,"@ApiOkResponse()"),e.qZA()(),e.TgZ(69,"li")(70,"code"),e._uU(71,"@ApiCreatedResponse()"),e.qZA()(),e.TgZ(72,"li")(73,"code"),e._uU(74,"@ApiAcceptedResponse()"),e.qZA()(),e.TgZ(75,"li")(76,"code"),e._uU(77,"@ApiNoContentResponse()"),e.qZA()(),e.TgZ(78,"li")(79,"code"),e._uU(80,"@ApiMovedPermanentlyResponse()"),e.qZA()(),e.TgZ(81,"li")(82,"code"),e._uU(83,"@ApiFoundResponse()"),e.qZA()(),e.TgZ(84,"li")(85,"code"),e._uU(86,"@ApiBadRequestResponse()"),e.qZA()(),e.TgZ(87,"li")(88,"code"),e._uU(89,"@ApiUnauthorizedResponse()"),e.qZA()(),e.TgZ(90,"li")(91,"code"),e._uU(92,"@ApiNotFoundResponse()"),e.qZA()(),e.TgZ(93,"li")(94,"code"),e._uU(95,"@ApiForbiddenResponse()"),e.qZA()(),e.TgZ(96,"li")(97,"code"),e._uU(98,"@ApiMethodNotAllowedResponse()"),e.qZA()(),e.TgZ(99,"li")(100,"code"),e._uU(101,"@ApiNotAcceptableResponse()"),e.qZA()(),e.TgZ(102,"li")(103,"code"),e._uU(104,"@ApiRequestTimeoutResponse()"),e.qZA()(),e.TgZ(105,"li")(106,"code"),e._uU(107,"@ApiConflictResponse()"),e.qZA()(),e.TgZ(108,"li")(109,"code"),e._uU(110,"@ApiPreconditionFailedResponse()"),e.qZA()(),e.TgZ(111,"li")(112,"code"),e._uU(113,"@ApiTooManyRequestsResponse()"),e.qZA()(),e.TgZ(114,"li")(115,"code"),e._uU(116,"@ApiGoneResponse()"),e.qZA()(),e.TgZ(117,"li")(118,"code"),e._uU(119,"@ApiPayloadTooLargeResponse()"),e.qZA()(),e.TgZ(120,"li")(121,"code"),e._uU(122,"@ApiUnsupportedMediaTypeResponse()"),e.qZA()(),e.TgZ(123,"li")(124,"code"),e._uU(125,"@ApiUnprocessableEntityResponse()"),e.qZA()(),e.TgZ(126,"li")(127,"code"),e._uU(128,"@ApiInternalServerErrorResponse()"),e.qZA()(),e.TgZ(129,"li")(130,"code"),e._uU(131,"@ApiNotImplementedResponse()"),e.qZA()(),e.TgZ(132,"li")(133,"code"),e._uU(134,"@ApiBadGatewayResponse()"),e.qZA()(),e.TgZ(135,"li")(136,"code"),e._uU(137,"@ApiServiceUnavailableResponse()"),e.qZA()(),e.TgZ(138,"li")(139,"code"),e._uU(140,"@ApiGatewayTimeoutResponse()"),e.qZA()(),e.TgZ(141,"li")(142,"code"),e._uU(143,"@ApiDefaultResponse()"),e.qZA()()(),e.TgZ(144,"pre")(145,"code",7),e._uU(146,"\n@Post()\n@ApiCreatedResponse({ description: 'The record has been successfully created.'})\n@ApiForbiddenResponse({ description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(147,"p"),e._uU(148,"To specify a return model for a request, we must create a class and annotate all properties with the "),e.TgZ(149,"code"),e._uU(150,"@ApiProperty()"),e.qZA(),e._uU(151," decorator."),e.qZA(),e.TgZ(152,"pre")(153,"code",7),e._uU(154,"\nexport class Cat {\n  @ApiProperty()\n  id: number;\n\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(155,"p"),e._uU(156,"Then the "),e.TgZ(157,"code"),e._uU(158,"Cat"),e.qZA(),e._uU(159," model can be used in combination with the "),e.TgZ(160,"code"),e._uU(161,"type"),e.qZA(),e._uU(162," property of the response decorator."),e.qZA(),e.TgZ(163,"pre")(164,"code",7),e._uU(165,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {\n  @Post()\n  @ApiCreatedResponse({\n    description: 'The record has been successfully created.',\n    type: Cat,\n  })\n  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}\n"),e.qZA()(),e.TgZ(166,"p"),e._uU(167,"Let's open the browser and verify the generated "),e.TgZ(168,"code"),e._uU(169,"Cat"),e.qZA(),e._uU(170," model:"),e.qZA(),e.TgZ(171,"figure"),e._UZ(172,"img",10),e.qZA(),e.TgZ(173,"h4",11)(174,"span"),e._uU(175,"File upload"),e.qZA()(),e.TgZ(176,"p"),e._uU(177,"You can enable file upload for a specific method with the "),e.TgZ(178,"code"),e._uU(179,"@ApiBody"),e.qZA(),e._uU(180," decorator together with "),e.TgZ(181,"code"),e._uU(182,"@ApiConsumes()"),e.qZA(),e._uU(183,". Here's a full example using the "),e.TgZ(184,"a",12),e._uU(185,"File Upload"),e.qZA(),e._uU(186," technique:"),e.qZA(),e.TgZ(187,"pre")(188,"code",7),e._uU(189,"\n@UseInterceptors(FileInterceptor('file'))\n@ApiConsumes('multipart/form-data')\n@ApiBody({\n  description: 'List of cats',\n  type: FileUploadDto,\n})\nuploadFile(@UploadedFile() file) {}\n"),e.qZA()(),e.TgZ(190,"p"),e._uU(191,"Where "),e.TgZ(192,"code"),e._uU(193,"FileUploadDto"),e.qZA(),e._uU(194," is defined as follows:"),e.qZA(),e.TgZ(195,"pre")(196,"code",7),e._uU(197,"\nclass FileUploadDto {\n  @ApiProperty({ type: 'string', format: 'binary' })\n  file: any;\n}\n"),e.qZA()(),e.TgZ(198,"p"),e._uU(199,"To handle multiple files uploading, you can define "),e.TgZ(200,"code"),e._uU(201,"FilesUploadDto"),e.qZA(),e._uU(202," as follows:"),e.qZA(),e.TgZ(203,"pre")(204,"code",7),e._uU(205,"\nclass FilesUploadDto {\n  @ApiProperty({ type: 'array', items: { type: 'string', format: 'binary' } })\n  files: any[];\n}\n"),e.qZA()(),e.TgZ(206,"h4",13)(207,"span"),e._uU(208,"Extensions"),e.qZA()(),e.TgZ(209,"p"),e._uU(210,"To add an Extension to a request use the "),e.TgZ(211,"code"),e._uU(212,"@ApiExtension()"),e.qZA(),e._uU(213," decorator. The extension name must be prefixed with "),e.TgZ(214,"code"),e._uU(215,"x-"),e.qZA(),e._uU(216,"."),e.qZA(),e.TgZ(217,"pre")(218,"code",7),e._uU(219,"\n@ApiExtension('x-foo', { hello: 'world' })\n"),e.qZA()(),e.TgZ(220,"h4",14)(221,"span"),e._uU(222,"Advanced: Generic "),e.TgZ(223,"code"),e._uU(224,"ApiResponse"),e.qZA()()(),e.TgZ(225,"p"),e._uU(226,"With the ability to provide "),e.TgZ(227,"a",15),e._uU(228,"Raw Definitions"),e.qZA(),e._uU(229,", we can define Generic schema for Swagger UI. Assume we have the following DTO:"),e.qZA(),e.TgZ(230,"pre")(231,"code",16),e._uU(232,"\nexport class PaginatedDto<TData> {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  offset: number;\n\n  results: TData[];\n}\n"),e.qZA()(),e.TgZ(233,"p"),e._uU(234,"We skip decorating "),e.TgZ(235,"code"),e._uU(236,"results"),e.qZA(),e._uU(237," as we will be providing a raw definition for it later. Now, let's define another DTO and name it, for example, "),e.TgZ(238,"code"),e._uU(239,"CatDto"),e.qZA(),e._uU(240,", as follows:"),e.qZA(),e.TgZ(241,"pre")(242,"code",16),e._uU(243,"\nexport class CatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(244,"p"),e._uU(245,"With this in place, we can define a "),e.TgZ(246,"code"),e._uU(247,"PaginatedDto<CatDto>"),e.qZA(),e._uU(248," response, as follows:"),e.qZA(),e.TgZ(249,"pre")(250,"code",16),e._uU(251,"\n@ApiOkResponse({\n  schema: {\n    allOf: [\n      { $ref: getSchemaPath(PaginatedDto) },\n      {\n        properties: {\n          results: {\n            type: 'array',\n            items: { $ref: getSchemaPath(CatDto) },\n          },\n        },\n      },\n    ],\n  },\n})\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.qZA()(),e.TgZ(252,"p"),e._uU(253,"In this example, we specify that the response will have allOf "),e.TgZ(254,"code"),e._uU(255,"PaginatedDto"),e.qZA(),e._uU(256," and the "),e.TgZ(257,"code"),e._uU(258,"results"),e.qZA(),e._uU(259," property will be of type "),e.TgZ(260,"code"),e._uU(261,"Array<CatDto>"),e.qZA(),e._uU(262,"."),e.qZA(),e.TgZ(263,"ul")(264,"li")(265,"code"),e._uU(266,"getSchemaPath()"),e.qZA(),e._uU(267," function that returns the OpenAPI Schema path from within the OpenAPI Spec File for a given model."),e.qZA(),e.TgZ(268,"li")(269,"code"),e._uU(270,"allOf"),e.qZA(),e._uU(271," is a concept that OAS 3 provides to cover various Inheritance related use-cases."),e.qZA()(),e.TgZ(272,"p"),e._uU(273,"Lastly, since "),e.TgZ(274,"code"),e._uU(275,"PaginatedDto"),e.qZA(),e._uU(276," is not directly referenced by any controller, the "),e.TgZ(277,"code"),e._uU(278,"SwaggerModule"),e.qZA(),e._uU(279," will not be able to generate a corresponding model definition just yet. In this case, we must add it as an "),e.TgZ(280,"a",17),e._uU(281,"Extra Model"),e.qZA(),e._uU(282,". For example, we can use the "),e.TgZ(283,"code"),e._uU(284,"@ApiExtraModels()"),e.qZA(),e._uU(285," decorator on the controller level, as follows:"),e.qZA(),e.TgZ(286,"pre")(287,"code",16),e._uU(288,"\n@Controller('cats')\n@ApiExtraModels(PaginatedDto)\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(289,"p"),e._uU(290,"If you run Swagger now, the generated "),e.TgZ(291,"code"),e._uU(292,"swagger.json"),e.qZA(),e._uU(293," for this specific endpoint should have the following response defined:"),e.qZA(),e.TgZ(294,"pre")(295,"code",18),e._uU(296,'\n"responses": {\n  "200": {\n    "description": "",\n    "content": {\n      "application/json": {\n        "schema": {\n          "allOf": [\n            {\n              "$ref": "#/components/schemas/PaginatedDto"\n            },\n            {\n              "properties": {\n                "results": {\n                  "$ref": "#/components/schemas/CatDto"\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n'),e.qZA()(),e.TgZ(297,"p"),e._uU(298,"To make it reusable, we can create a custom decorator for "),e.TgZ(299,"code"),e._uU(300,"PaginatedDto"),e.qZA(),e._uU(301,", as follows:"),e.qZA(),e.TgZ(302,"pre")(303,"code",16),e._uU(304,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiExtraModels(PaginatedDto, model),\n    ApiOkResponse({\n      schema: {\n        allOf: [\n          { $ref: getSchemaPath(PaginatedDto) },\n          {\n            properties: {\n              results: {\n                type: 'array',\n                items: { $ref: getSchemaPath(model) },\n              },\n            },\n          },\n        ],\n      },\n    }),\n  );\n};\n"),e.qZA()(),e.TgZ(305,"blockquote",19)(306,"strong"),e._uU(307,"Hint"),e.qZA(),e.TgZ(308,"code"),e._uU(309,"Type<any>"),e.qZA(),e._uU(310," interface and "),e.TgZ(311,"code"),e._uU(312,"applyDecorators"),e.qZA(),e._uU(313," function are imported from the "),e.TgZ(314,"code"),e._uU(315,"@nestjs/common"),e.qZA(),e._uU(316," package.\n"),e.qZA(),e.TgZ(317,"p"),e._uU(318,"To ensure that "),e.TgZ(319,"code"),e._uU(320,"SwaggerModule"),e.qZA(),e._uU(321," will generate a definition for our model, we must add it as an extra model, like we did earlier with the "),e.TgZ(322,"code"),e._uU(323,"PaginatedDto"),e.qZA(),e._uU(324," in the controller."),e.qZA(),e.TgZ(325,"p"),e._uU(326,"With this in place, we can use the custom "),e.TgZ(327,"code"),e._uU(328,"@ApiPaginatedResponse()"),e.qZA(),e._uU(329," decorator on our endpoint:"),e.qZA(),e.TgZ(330,"pre")(331,"code",16),e._uU(332,"\n@ApiPaginatedResponse(CatDto)\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.qZA()(),e.TgZ(333,"p"),e._uU(334,"For client generation tools, this approach poses an ambiguity in how the "),e.TgZ(335,"code"),e._uU(336,"PaginatedResponse<TModel>"),e.qZA(),e._uU(337," is being generated for the client. The following snippet is an example of a client generator result for the above "),e.TgZ(338,"code"),e._uU(339,"GET /"),e.qZA(),e._uU(340," endpoint."),e.qZA(),e.TgZ(341,"pre")(342,"code",7),e._uU(343,"\n// Angular\nfindAll(): Observable<{ total: number, limit: number, offset: number, results: CatDto[] }>\n"),e.qZA()(),e.TgZ(344,"p"),e._uU(345,"As you can see, the "),e.TgZ(346,"strong"),e._uU(347,"Return Type"),e.qZA(),e._uU(348," here is ambiguous. To workaround this issue, you can add a "),e.TgZ(349,"code"),e._uU(350,"title"),e.qZA(),e._uU(351," property to the "),e.TgZ(352,"code"),e._uU(353,"schema"),e.qZA(),e._uU(354," for "),e.TgZ(355,"code"),e._uU(356,"ApiPaginatedResponse"),e.qZA(),e._uU(357,":"),e.qZA(),e.TgZ(358,"pre")(359,"code",7),e._uU(360,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(model: TModel) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        title: `PaginatedResponseOf${model.name}`,\n        allOf: [\n          // ...\n        ],\n      },\n    }),\n  );\n};\n"),e.qZA()(),e.TgZ(361,"p"),e._uU(362,"Now the result of the client generator tool will become:"),e.qZA(),e.TgZ(363,"pre")(364,"code",16),e._uU(365,"\n// Angular\nfindAll(): Observable<PaginatedResponseOfCatDto>\n"),e.qZA()()())},dependencies:[i.U,u.rH],encapsulation:2,changeDetection:0})}return t})(),q=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-openapi-other-features"]],features:[e.qOj],decls:80,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/other-features.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","other-features"],["appAnchor","","id","global-prefix"],[1,"language-typescript"],["appAnchor","","id","global-parameters"],["appAnchor","","id","multiple-specifications"],[1,"language-bash"],["src","/assets/swagger-cats.png"],["src","/assets/swagger-dogs.png"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Other features"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"This page lists all the other available features that you may find useful."),e.qZA(),e.TgZ(9,"h4",6)(10,"span"),e._uU(11,"Global prefix"),e.qZA()(),e.TgZ(12,"p"),e._uU(13,"To ignore a global prefix for routes set through "),e.TgZ(14,"code"),e._uU(15,"setGlobalPrefix()"),e.qZA(),e._uU(16,", use "),e.TgZ(17,"code"),e._uU(18,"ignoreGlobalPrefix"),e.qZA(),e._uU(19,":"),e.qZA(),e.TgZ(20,"pre")(21,"code",7),e._uU(22,"\nconst document = SwaggerModule.createDocument(app, options, {\n  ignoreGlobalPrefix: true,\n});\n"),e.qZA()(),e.TgZ(23,"h4",8)(24,"span"),e._uU(25,"Global parameters"),e.qZA()(),e.TgZ(26,"p"),e._uU(27,"You can add parameter definitions to all routes using "),e.TgZ(28,"code"),e._uU(29,"DocumentBuilder"),e.qZA(),e._uU(30,":"),e.qZA(),e.TgZ(31,"pre")(32,"code",7),e._uU(33,"\nconst options = new DocumentBuilder().addGlobalParameters({\n  name: 'tenantId',\n  in: 'header',\n});\n"),e.qZA()(),e.TgZ(34,"h4",9)(35,"span"),e._uU(36,"Multiple specifications"),e.qZA()(),e.TgZ(37,"p"),e._uU(38,"The "),e.TgZ(39,"code"),e._uU(40,"SwaggerModule"),e.qZA(),e._uU(41," provides a way to support multiple specifications. In other words, you can serve different documentation, with different UIs, on different endpoints."),e.qZA(),e.TgZ(42,"p"),e._uU(43,"To support multiple specifications, your application must be written with a modular approach. The "),e.TgZ(44,"code"),e._uU(45,"createDocument()"),e.qZA(),e._uU(46," method takes a 3rd argument, "),e.TgZ(47,"code"),e._uU(48,"extraOptions"),e.qZA(),e._uU(49,", which is an object with a property named "),e.TgZ(50,"code"),e._uU(51,"include"),e.qZA(),e._uU(52,". The "),e.TgZ(53,"code"),e._uU(54,"include"),e.qZA(),e._uU(55," property takes a value which is an array of modules."),e.qZA(),e.TgZ(56,"p"),e._uU(57,"You can setup multiple specifications support as shown below:"),e.qZA(),e.TgZ(58,"pre")(59,"code",7),e._uU(60,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  /**\n   * createDocument(application, configurationOptions, extraOptions);\n   *\n   * createDocument method takes an optional 3rd argument \"extraOptions\"\n   * which is an object with \"include\" property where you can pass an Array\n   * of Modules that you want to include in that Swagger Specification\n   * E.g: CatsModule and DogsModule will have two separate Swagger Specifications which\n   * will be exposed on two different SwaggerUI with two different endpoints.\n   */\n\n  const options = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  const catDocument = SwaggerModule.createDocument(app, options, {\n    include: [CatsModule],\n  });\n  SwaggerModule.setup('api/cats', app, catDocument);\n\n  const secondOptions = new DocumentBuilder()\n    .setTitle('Dogs example')\n    .setDescription('The dogs API description')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  const dogDocument = SwaggerModule.createDocument(app, secondOptions, {\n    include: [DogsModule],\n  });\n  SwaggerModule.setup('api/dogs', app, dogDocument);\n\n  await app.listen(3000);\n}\nbootstrap();\n"),e.qZA()(),e.TgZ(61,"p"),e._uU(62,"Now you can start your server with the following command:"),e.qZA(),e.TgZ(63,"pre")(64,"code",10),e._uU(65,"\n$ npm run start\n"),e.qZA()(),e.TgZ(66,"p"),e._uU(67,"Navigate to "),e.TgZ(68,"code"),e._uU(69,"http://localhost:3000/api/cats"),e.qZA(),e._uU(70," to see the Swagger UI for cats:"),e.qZA(),e.TgZ(71,"figure"),e._UZ(72,"img",11),e.qZA(),e.TgZ(73,"p"),e._uU(74,"In turn, "),e.TgZ(75,"code"),e._uU(76,"http://localhost:3000/api/dogs"),e.qZA(),e._uU(77," will expose the Swagger UI for dogs:"),e.qZA(),e.TgZ(78,"figure"),e._UZ(79,"img",12),e.qZA()())},dependencies:[i.U],encapsulation:2,changeDetection:0})}return t})(),f=(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-openapi-security"]],features:[e.qOj],decls:107,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/security.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","security"],[1,"language-typescript"],["appAnchor","","id","basic-authentication"],["appAnchor","","id","bearer-authentication"],["appAnchor","","id","oauth2-authentication"],["appAnchor","","id","cookie-authentication"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Security"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"To define which security mechanisms should be used for a specific operation, use the "),e.TgZ(9,"code"),e._uU(10,"@ApiSecurity()"),e.qZA(),e._uU(11," decorator."),e.qZA(),e.TgZ(12,"pre")(13,"code",6),e._uU(14,"\n@ApiSecurity('basic')\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(17,"code"),e._uU(18,"DocumentBuilder"),e.qZA(),e._uU(19,":"),e.qZA(),e.TgZ(20,"pre")(21,"code",6),e._uU(22,"\nconst options = new DocumentBuilder().addSecurity('basic', {\n  type: 'http',\n  scheme: 'basic',\n});\n"),e.qZA()(),e.TgZ(23,"p"),e._uU(24,"Some of the most popular authentication techniques are built-in (e.g., "),e.TgZ(25,"code"),e._uU(26,"basic"),e.qZA(),e._uU(27," and "),e.TgZ(28,"code"),e._uU(29,"bearer"),e.qZA(),e._uU(30,") and therefore you don't have to define security mechanisms manually as shown above."),e.qZA(),e.TgZ(31,"h4",7)(32,"span"),e._uU(33,"Basic authentication"),e.qZA()(),e.TgZ(34,"p"),e._uU(35,"To enable basic authentication, use "),e.TgZ(36,"code"),e._uU(37,"@ApiBasicAuth()"),e.qZA(),e._uU(38,"."),e.qZA(),e.TgZ(39,"pre")(40,"code",6),e._uU(41,"\n@ApiBasicAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(42,"p"),e._uU(43,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(44,"code"),e._uU(45,"DocumentBuilder"),e.qZA(),e._uU(46,":"),e.qZA(),e.TgZ(47,"pre")(48,"code",6),e._uU(49,"\nconst options = new DocumentBuilder().addBasicAuth();\n"),e.qZA()(),e.TgZ(50,"h4",8)(51,"span"),e._uU(52,"Bearer authentication"),e.qZA()(),e.TgZ(53,"p"),e._uU(54,"To enable bearer authentication, use "),e.TgZ(55,"code"),e._uU(56,"@ApiBearerAuth()"),e.qZA(),e._uU(57,"."),e.qZA(),e.TgZ(58,"pre")(59,"code",6),e._uU(60,"\n@ApiBearerAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(61,"p"),e._uU(62,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(63,"code"),e._uU(64,"DocumentBuilder"),e.qZA(),e._uU(65,":"),e.qZA(),e.TgZ(66,"pre")(67,"code",6),e._uU(68,"\nconst options = new DocumentBuilder().addBearerAuth();\n"),e.qZA()(),e.TgZ(69,"h4",9)(70,"span"),e._uU(71,"OAuth2 authentication"),e.qZA()(),e.TgZ(72,"p"),e._uU(73,"To enable OAuth2, use "),e.TgZ(74,"code"),e._uU(75,"@ApiOAuth2()"),e.qZA(),e._uU(76,"."),e.qZA(),e.TgZ(77,"pre")(78,"code",6),e._uU(79,"\n@ApiOAuth2(['pets:write'])\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(80,"p"),e._uU(81,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(82,"code"),e._uU(83,"DocumentBuilder"),e.qZA(),e._uU(84,":"),e.qZA(),e.TgZ(85,"pre")(86,"code",6),e._uU(87,"\nconst options = new DocumentBuilder().addOAuth2();\n"),e.qZA()(),e.TgZ(88,"h4",10)(89,"span"),e._uU(90,"Cookie authentication"),e.qZA()(),e.TgZ(91,"p"),e._uU(92,"To enable cookie authentication, use "),e.TgZ(93,"code"),e._uU(94,"@ApiCookieAuth()"),e.qZA(),e._uU(95,"."),e.qZA(),e.TgZ(96,"pre")(97,"code",6),e._uU(98,"\n@ApiCookieAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(99,"p"),e._uU(100,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(101,"code"),e._uU(102,"DocumentBuilder"),e.qZA(),e._uU(103,":"),e.qZA(),e.TgZ(104,"pre")(105,"code",6),e._uU(106,"\nconst options = new DocumentBuilder().addCookieAuth('optional-session-id');\n"),e.qZA()()())},encapsulation:2,changeDetection:0})}return t})();var y=r(8427);const w=[{path:"introduction",component:A,data:{title:"OpenAPI (Swagger)"}},{path:"types-and-parameters",component:(()=>{class t extends s.y{static \u0275fac=function(){let o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}();static \u0275cmp=e.Xpm({type:t,selectors:[["app-openapi-types-parameters"]],features:[e.qOj],decls:395,vars:1,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/types-and-parameters.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","types-and-parameters"],[1,"language-typescript"],[1,"info"],["src","/assets/swagger-dto.png"],["routerLink","/openapi/cli-plugin"],["src","/assets/swagger-dto2.png"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#schemaObject"],["appAnchor","","id","arrays"],["appAnchor","","id","circular-dependencies"],["appAnchor","","id","generics-and-interfaces"],["appAnchor","","id","enums"],["src","/assets/enum_query.gif"],["src","/assets/enum_query_array.gif"],["appAnchor","","id","enums-schema"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/enums/"],[1,"language-yaml"],["rel","nofollow","target","_blank","href","https://github.com/RicoSuter/NSwag"],["appAnchor","","id","raw-definitions"],["appAnchor","","id","extra-models"],["appAnchor","","id","oneof-anyof-allof"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Types and parameters"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"The "),e.TgZ(9,"code"),e._uU(10,"SwaggerModule"),e.qZA(),e._uU(11," searches for all "),e.TgZ(12,"code"),e._uU(13,"@Body()"),e.qZA(),e._uU(14,", "),e.TgZ(15,"code"),e._uU(16,"@Query()"),e.qZA(),e._uU(17,", and "),e.TgZ(18,"code"),e._uU(19,"@Param()"),e.qZA(),e._uU(20," decorators in route handlers to generate the API document. It also creates corresponding model definitions by taking advantage of reflection. Consider the following code:"),e.qZA(),e.TgZ(21,"pre")(22,"code",6),e._uU(23,"\n@Post()\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(24,"blockquote",7)(25,"strong"),e._uU(26,"Hint"),e.qZA(),e._uU(27," To explicitly set the body definition use the "),e.TgZ(28,"code"),e._uU(29,"@ApiBody()"),e.qZA(),e._uU(30," decorator (imported from the "),e.TgZ(31,"code"),e._uU(32,"@nestjs/swagger"),e.qZA(),e._uU(33," package).\n"),e.qZA(),e.TgZ(34,"p"),e._uU(35,"Based on the "),e.TgZ(36,"code"),e._uU(37,"CreateCatDto"),e.qZA(),e._uU(38,", the following model definition Swagger UI will be created:"),e.qZA(),e.TgZ(39,"figure"),e._UZ(40,"img",8),e.qZA(),e.TgZ(41,"p"),e._uU(42,"As you can see, the definition is empty although the class has a few declared properties. In order to make the class properties visible to the "),e.TgZ(43,"code"),e._uU(44,"SwaggerModule"),e.qZA(),e._uU(45,", we have to either annotate them with the "),e.TgZ(46,"code"),e._uU(47,"@ApiProperty()"),e.qZA(),e._uU(48," decorator or use the CLI plugin (read more in the "),e.TgZ(49,"strong"),e._uU(50,"Plugin"),e.qZA(),e._uU(51," section) which will do it automatically:"),e.qZA(),e.TgZ(52,"pre")(53,"code",6),e._uU(54,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(55,"blockquote",7)(56,"strong"),e._uU(57,"Hint"),e.qZA(),e._uU(58," Instead of manually annotating each property, consider using the Swagger plugin (see "),e.TgZ(59,"a",9),e._uU(60,"Plugin"),e.qZA(),e._uU(61," section) which will automatically provide this for you.\n"),e.qZA(),e.TgZ(62,"p"),e._uU(63,"Let's open the browser and verify the generated "),e.TgZ(64,"code"),e._uU(65,"CreateCatDto"),e.qZA(),e._uU(66," model:"),e.qZA(),e.TgZ(67,"figure"),e._UZ(68,"img",10),e.qZA(),e.TgZ(69,"p"),e._uU(70,"In addition, the "),e.TgZ(71,"code"),e._uU(72,"@ApiProperty()"),e.qZA(),e._uU(73," decorator allows setting various "),e.TgZ(74,"a",11),e._uU(75,"Schema Object"),e.qZA(),e._uU(76," properties:"),e.qZA(),e.TgZ(77,"pre")(78,"code",6),e._uU(79,"\n@ApiProperty({\n  description: 'The age of a cat',\n  minimum: 1,\n  default: 1,\n})\nage: number;\n"),e.qZA()(),e.TgZ(80,"blockquote",7)(81,"strong"),e._uU(82,"Hint"),e.qZA(),e._uU(83," Instead of explicitly typing the "),e.TgZ(84,"code"),e._uU(85),e.qZA(),e._uU(86," you can use the "),e.TgZ(87,"code"),e._uU(88,"@ApiPropertyOptional()"),e.qZA(),e._uU(89," short-hand decorator.\n"),e.qZA(),e.TgZ(90,"p"),e._uU(91,"In order to explicitly set the type of the property, use the "),e.TgZ(92,"code"),e._uU(93,"type"),e.qZA(),e._uU(94," key:"),e.qZA(),e.TgZ(95,"pre")(96,"code",6),e._uU(97,"\n@ApiProperty({\n  type: Number,\n})\nage: number;\n"),e.qZA()(),e.TgZ(98,"h4",12)(99,"span"),e._uU(100,"Arrays"),e.qZA()(),e.TgZ(101,"p"),e._uU(102,"When the property is an array, we must manually indicate the array type as shown below:"),e.qZA(),e.TgZ(103,"pre")(104,"code",6),e._uU(105,"\n@ApiProperty({ type: [String] })\nnames: string[];\n"),e.qZA()(),e.TgZ(106,"blockquote",7)(107,"strong"),e._uU(108,"Hint"),e.qZA(),e._uU(109," Consider using the Swagger plugin (see "),e.TgZ(110,"a",9),e._uU(111,"Plugin"),e.qZA(),e._uU(112," section) which will automatically detect arrays.\n"),e.qZA(),e.TgZ(113,"p"),e._uU(114,"Either include the type as the first element of an array (as shown above) or set the "),e.TgZ(115,"code"),e._uU(116,"isArray"),e.qZA(),e._uU(117," property to "),e.TgZ(118,"code"),e._uU(119,"true"),e.qZA(),e._uU(120,"."),e.qZA(),e.TgZ(121,"p"),e._UZ(122,"app-banner-enterprise"),e.qZA(),e.TgZ(123,"h4",13)(124,"span"),e._uU(125,"Circular dependencies"),e.qZA()(),e.TgZ(126,"p"),e._uU(127,"When you have circular dependencies between classes, use a lazy function to provide the "),e.TgZ(128,"code"),e._uU(129,"SwaggerModule"),e.qZA(),e._uU(130," with type information:"),e.qZA(),e.TgZ(131,"pre")(132,"code",6),e._uU(133,"\n@ApiProperty({ type: () => Node })\nnode: Node;\n"),e.qZA()(),e.TgZ(134,"blockquote",7)(135,"strong"),e._uU(136,"Hint"),e.qZA(),e._uU(137," Consider using the Swagger plugin (see "),e.TgZ(138,"a",9),e._uU(139,"Plugin"),e.qZA(),e._uU(140," section) which will automatically detect circular dependencies.\n"),e.qZA(),e.TgZ(141,"h4",14)(142,"span"),e._uU(143,"Generics and interfaces"),e.qZA()(),e.TgZ(144,"p"),e._uU(145,"Since TypeScript does not store metadata about generics or interfaces, when you use them in your DTOs, "),e.TgZ(146,"code"),e._uU(147,"SwaggerModule"),e.qZA(),e._uU(148," may not be able to properly generate model definitions at runtime. For instance, the following code won't be correctly inspected by the Swagger module:"),e.qZA(),e.TgZ(149,"pre")(150,"code",6),e._uU(151,"\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.qZA()(),e.TgZ(152,"p"),e._uU(153,"In order to overcome this limitation, you can set the type explicitly:"),e.qZA(),e.TgZ(154,"pre")(155,"code",6),e._uU(156,"\n@ApiBody({ type: [CreateUserDto] })\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.qZA()(),e.TgZ(157,"h4",15)(158,"span"),e._uU(159,"Enums"),e.qZA()(),e.TgZ(160,"p"),e._uU(161,"To identify an "),e.TgZ(162,"code"),e._uU(163,"enum"),e.qZA(),e._uU(164,", we must manually set the "),e.TgZ(165,"code"),e._uU(166,"enum"),e.qZA(),e._uU(167," property on the "),e.TgZ(168,"code"),e._uU(169,"@ApiProperty"),e.qZA(),e._uU(170," with an array of values."),e.qZA(),e.TgZ(171,"pre")(172,"code",6),e._uU(173,"\n@ApiProperty({ enum: ['Admin', 'Moderator', 'User']})\nrole: UserRole;\n"),e.qZA()(),e.TgZ(174,"p"),e._uU(175,"Alternatively, define an actual TypeScript enum as follows:"),e.qZA(),e.TgZ(176,"pre")(177,"code",6),e._uU(178,"\nexport enum UserRole {\n  Admin = 'Admin',\n  Moderator = 'Moderator',\n  User = 'User',\n}\n"),e.qZA()(),e.TgZ(179,"p"),e._uU(180,"You can then use the enum directly with the "),e.TgZ(181,"code"),e._uU(182,"@Query()"),e.qZA(),e._uU(183," parameter decorator in combination with the "),e.TgZ(184,"code"),e._uU(185,"@ApiQuery()"),e.qZA(),e._uU(186," decorator."),e.qZA(),e.TgZ(187,"pre")(188,"code",6),e._uU(189,"\n@ApiQuery({ name: 'role', enum: UserRole })\nasync filterByRole(@Query('role') role: UserRole = UserRole.User) {}\n"),e.qZA()(),e.TgZ(190,"figure"),e._UZ(191,"img",16),e.qZA(),e.TgZ(192,"p"),e._uU(193,"With "),e.TgZ(194,"code"),e._uU(195,"isArray"),e.qZA(),e._uU(196," set to "),e.TgZ(197,"strong"),e._uU(198,"true"),e.qZA(),e._uU(199,", the "),e.TgZ(200,"code"),e._uU(201,"enum"),e.qZA(),e._uU(202," can be selected as a "),e.TgZ(203,"strong"),e._uU(204,"multi-select"),e.qZA(),e._uU(205,":"),e.qZA(),e.TgZ(206,"figure"),e._UZ(207,"img",17),e.qZA(),e.TgZ(208,"h4",18)(209,"span"),e._uU(210,"Enums schema"),e.qZA()(),e.TgZ(211,"p"),e._uU(212,"By default, the "),e.TgZ(213,"code"),e._uU(214,"enum"),e.qZA(),e._uU(215," property will add a raw definition of "),e.TgZ(216,"a",19),e._uU(217,"Enum"),e.qZA(),e._uU(218," on the "),e.TgZ(219,"code"),e._uU(220,"parameter"),e.qZA(),e._uU(221,"."),e.qZA(),e.TgZ(222,"pre")(223,"code",20),e._uU(224,"\n- breed:\n    type: 'string'\n    enum:\n      - Persian\n      - Tabby\n      - Siamese\n"),e.qZA()(),e.TgZ(225,"p"),e._uU(226,"The above specification works fine for most cases. However, if you are utilizing a tool that takes the specification as "),e.TgZ(227,"strong"),e._uU(228,"input"),e.qZA(),e._uU(229," and generates "),e.TgZ(230,"strong"),e._uU(231,"client-side"),e.qZA(),e._uU(232," code, you might run into a problem with the generated code containing duplicated "),e.TgZ(233,"code"),e._uU(234,"enums"),e.qZA(),e._uU(235,". Consider the following code snippet:"),e.qZA(),e.TgZ(236,"pre")(237,"code",6),e._uU(238,"\n// generated client-side code\nexport class CatDetail {\n  breed: CatDetailEnum;\n}\n\nexport class CatInformation {\n  breed: CatInformationEnum;\n}\n\nexport enum CatDetailEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n\nexport enum CatInformationEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n"),e.qZA()(),e.TgZ(239,"blockquote",7)(240,"strong"),e._uU(241,"Hint"),e.qZA(),e._uU(242," The above snippet is generated using a tool called "),e.TgZ(243,"a",21),e._uU(244,"NSwag"),e.qZA(),e._uU(245,".\n"),e.qZA(),e.TgZ(246,"p"),e._uU(247,"You can see that now you have two "),e.TgZ(248,"code"),e._uU(249,"enums"),e.qZA(),e._uU(250," that are exactly the same.\nTo address this issue, you can pass an "),e.TgZ(251,"code"),e._uU(252,"enumName"),e.qZA(),e._uU(253," along with the "),e.TgZ(254,"code"),e._uU(255,"enum"),e.qZA(),e._uU(256," property in your decorator."),e.qZA(),e.TgZ(257,"pre")(258,"code",6),e._uU(259,"\nexport class CatDetail {\n  @ApiProperty({ enum: CatBreed, enumName: 'CatBreed' })\n  breed: CatBreed;\n}\n"),e.qZA()(),e.TgZ(260,"p"),e._uU(261,"The "),e.TgZ(262,"code"),e._uU(263,"enumName"),e.qZA(),e._uU(264," property enables "),e.TgZ(265,"code"),e._uU(266,"@nestjs/swagger"),e.qZA(),e._uU(267," to turn "),e.TgZ(268,"code"),e._uU(269,"CatBreed"),e.qZA(),e._uU(270," into its own "),e.TgZ(271,"code"),e._uU(272,"schema"),e.qZA(),e._uU(273," which in turns makes "),e.TgZ(274,"code"),e._uU(275,"CatBreed"),e.qZA(),e._uU(276," enum reusable. The specification will look like the following:"),e.qZA(),e.TgZ(277,"pre")(278,"code",20),e._uU(279,"\nCatDetail:\n  type: 'object'\n  properties:\n    ...\n    - breed:\n        schema:\n          $ref: '#/components/schemas/CatBreed'\nCatBreed:\n  type: string\n  enum:\n    - Persian\n    - Tabby\n    - Siamese\n"),e.qZA()(),e.TgZ(280,"blockquote",7)(281,"strong"),e._uU(282,"Hint"),e.qZA(),e._uU(283," Any "),e.TgZ(284,"strong"),e._uU(285,"decorator"),e.qZA(),e._uU(286," that takes "),e.TgZ(287,"code"),e._uU(288,"enum"),e.qZA(),e._uU(289," as a property will also take "),e.TgZ(290,"code"),e._uU(291,"enumName"),e.qZA(),e._uU(292,".\n"),e.qZA(),e.TgZ(293,"h4",22)(294,"span"),e._uU(295,"Raw definitions"),e.qZA()(),e.TgZ(296,"p"),e._uU(297,"In some specific scenarios (e.g., deeply nested arrays, matrices), you may want to describe your type by hand."),e.qZA(),e.TgZ(298,"pre")(299,"code",6),e._uU(300,"\n@ApiProperty({\n  type: 'array',\n  items: {\n    type: 'array',\n    items: {\n      type: 'number',\n    },\n  },\n})\ncoords: number[][];\n"),e.qZA()(),e.TgZ(301,"p"),e._uU(302,"Likewise, in order to define your input/output content manually in controller classes, use the "),e.TgZ(303,"code"),e._uU(304,"schema"),e.qZA(),e._uU(305," property:"),e.qZA(),e.TgZ(306,"pre")(307,"code",6),e._uU(308,"\n@ApiBody({\n  schema: {\n    type: 'array',\n    items: {\n      type: 'array',\n      items: {\n        type: 'number',\n      },\n    },\n  },\n})\nasync create(@Body() coords: number[][]) {}\n"),e.qZA()(),e.TgZ(309,"h4",23)(310,"span"),e._uU(311,"Extra models"),e.qZA()(),e.TgZ(312,"p"),e._uU(313,"To define additional models that are not directly referenced in your controllers but should be inspected by the Swagger module, use the "),e.TgZ(314,"code"),e._uU(315,"@ApiExtraModels()"),e.qZA(),e._uU(316," decorator:"),e.qZA(),e.TgZ(317,"pre")(318,"code",6),e._uU(319,"\n@ApiExtraModels(ExtraModel)\nexport class CreateCatDto {}\n"),e.qZA()(),e.TgZ(320,"blockquote",7)(321,"strong"),e._uU(322,"Hint"),e.qZA(),e._uU(323," You only need to use "),e.TgZ(324,"code"),e._uU(325,"@ApiExtraModels()"),e.qZA(),e._uU(326," once for a specific model class.\n"),e.qZA(),e.TgZ(327,"p"),e._uU(328,"Alternatively, you can pass an options object with the "),e.TgZ(329,"code"),e._uU(330,"extraModels"),e.qZA(),e._uU(331," property specified to the "),e.TgZ(332,"code"),e._uU(333,"SwaggerModule#createDocument()"),e.qZA(),e._uU(334," method, as follows:"),e.qZA(),e.TgZ(335,"pre")(336,"code",6),e._uU(337,"\nconst document = SwaggerModule.createDocument(app, options, {\n  extraModels: [ExtraModel],\n});\n"),e.qZA()(),e.TgZ(338,"p"),e._uU(339,"To get a reference ("),e.TgZ(340,"code"),e._uU(341,"$ref"),e.qZA(),e._uU(342,") to your model, use the "),e.TgZ(343,"code"),e._uU(344,"getSchemaPath(ExtraModel)"),e.qZA(),e._uU(345," function:"),e.qZA(),e.TgZ(346,"pre")(347,"code",6),e._uU(348,"\n'application/vnd.api+json': {\n   schema: { $ref: getSchemaPath(ExtraModel) },\n},\n"),e.qZA()(),e.TgZ(349,"h4",24)(350,"span"),e._uU(351,"oneOf, anyOf, allOf"),e.qZA()(),e.TgZ(352,"p"),e._uU(353,"To combine schemas, you can use the "),e.TgZ(354,"code"),e._uU(355,"oneOf"),e.qZA(),e._uU(356,", "),e.TgZ(357,"code"),e._uU(358,"anyOf"),e.qZA(),e._uU(359," or "),e.TgZ(360,"code"),e._uU(361,"allOf"),e.qZA(),e._uU(362," keywords ("),e.TgZ(363,"a",25),e._uU(364,"read more"),e.qZA(),e._uU(365,")."),e.qZA(),e.TgZ(366,"pre")(367,"code",6),e._uU(368,"\n@ApiProperty({\n  oneOf: [\n    { $ref: getSchemaPath(Cat) },\n    { $ref: getSchemaPath(Dog) },\n  ],\n})\npet: Cat | Dog;\n"),e.qZA()(),e.TgZ(369,"p"),e._uU(370,"If you want to define a polymorphic array (i.e., an array whose members span multiple schemas), you should use a raw definition (see above) to define your type by hand."),e.qZA(),e.TgZ(371,"pre")(372,"code",6),e._uU(373,"\ntype Pet = Cat | Dog;\n\n@ApiProperty({\n  type: 'array',\n  items: {\n    oneOf: [\n      { $ref: getSchemaPath(Cat) },\n      { $ref: getSchemaPath(Dog) },\n    ],\n  },\n})\npets: Pet[];\n"),e.qZA()(),e.TgZ(374,"blockquote",7)(375,"strong"),e._uU(376,"Hint"),e.qZA(),e._uU(377," The "),e.TgZ(378,"code"),e._uU(379,"getSchemaPath()"),e.qZA(),e._uU(380," function is imported from "),e.TgZ(381,"code"),e._uU(382,"@nestjs/swagger"),e.qZA(),e._uU(383,".\n"),e.qZA(),e.TgZ(384,"p"),e._uU(385,"Both "),e.TgZ(386,"code"),e._uU(387,"Cat"),e.qZA(),e._uU(388," and "),e.TgZ(389,"code"),e._uU(390,"Dog"),e.qZA(),e._uU(391," must be defined as extra models using the "),e.TgZ(392,"code"),e._uU(393,"@ApiExtraModels()"),e.qZA(),e._uU(394," decorator (at the class-level)."),e.qZA()()),2&n&&(e.xp6(85),e.Oqu("@ApiProperty({ required: false })"))},dependencies:[i.U,y.V,u.rH],encapsulation:2,changeDetection:0})}return t})(),data:{title:"Types and Parameters - OpenAPI"}},{path:"operations",component:m,data:{title:"Operations - OpenAPI"}},{path:"security",component:f,data:{title:"Security - OpenAPI"}},{path:"decorators",component:g,data:{title:"Decorators - OpenAPI"}},{path:"mapped-types",component:h,data:{title:"Mapped Types - OpenAPI"}},{path:"cli-plugin",component:l,data:{title:"CLI Plugin - OpenAPI"}},{path:"other-features",component:q,data:{title:"Other features - OpenAPI"}},{path:"migration-guide",component:T,data:{title:"Migration guide - OpenAPI"}}];let b=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[c.ez,d.m,u.Bz.forChild(w)]})}return t})()}}]);